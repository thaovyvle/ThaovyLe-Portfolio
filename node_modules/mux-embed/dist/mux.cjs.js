"use strict";var Zr=Object.create;var qe=Object.defineProperty;var ei=Object.getOwnPropertyDescriptor;var ti=Object.getOwnPropertyNames;var ri=Object.getPrototypeOf,ii=Object.prototype.hasOwnProperty;var ft=function(r,e){return function(){return r&&(e=r(r=0)),e}};var H=function(r,e){return function(){return e||r((e={exports:{}}).exports,e),e.exports}},ai=function(r,e){for(var t in e)qe(r,t,{get:e[t],enumerable:!0})},_t=function(r,e,t,a){if(e&&typeof e=="object"||typeof e=="function")for(var i=ti(e),n=0,o=i.length,s;n<o;n++)s=i[n],!ii.call(r,s)&&s!==t&&qe(r,s,{get:function(f){return e[f]}.bind(null,s),enumerable:!(a=ei(e,s))||a.enumerable});return r};var B=function(r,e,t){return t=r!=null?Zr(ri(r)):{},_t(e||!r||!r.__esModule?qe(t,"default",{value:r,enumerable:!0}):t,r)},ni=function(r){return _t(qe({},"__esModule",{value:!0}),r)};var J=H(function($a,yt){var Te;typeof window!="undefined"?Te=window:typeof global!="undefined"?Te=global:typeof self!="undefined"?Te=self:Te={};yt.exports=Te});function C(r){"@swc/helpers - typeof";return r&&typeof Symbol!="undefined"&&r.constructor===Symbol?"symbol":typeof r}var ke=ft(function(){});var bt=H(function(gt,Oe){ke();(function(r,e){"use strict";typeof define=="function"&&define.amd?define(e):typeof Oe=="object"&&Oe.exports?Oe.exports=e():r.log=e()})(gt,function(){"use strict";var r=function(){},e="undefined",t=(typeof window=="undefined"?"undefined":C(window))!==e&&C(window.navigator)!==e&&/Trident\/|MSIE /.test(window.navigator.userAgent),a=["trace","debug","info","warn","error"];function i(l,w){var D=l[w];if(typeof D.bind=="function")return D.bind(l);try{return Function.prototype.bind.call(D,l)}catch(p){return function(){return Function.prototype.apply.apply(D,[l,arguments])}}}function n(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function o(l){return l==="debug"&&(l="log"),(typeof console=="undefined"?"undefined":C(console))===e?!1:l==="trace"&&t?n:console[l]!==void 0?i(console,l):console.log!==void 0?i(console,"log"):r}function s(l,w){for(var D=0;D<a.length;D++){var p=a[D];this[p]=D<l?r:this.methodFactory(p,l,w)}this.log=this.debug}function f(l,w,D){return function(){(typeof console=="undefined"?"undefined":C(console))!==e&&(s.call(this,w,D),this[l].apply(this,arguments))}}function h(l,w,D){return o(l)||f.apply(this,arguments)}function T(l,w,D){var p=this,_;w=w==null?"WARN":w;var c="loglevel";typeof l=="string"?c+=":"+l:(typeof l=="undefined"?"undefined":C(l))==="symbol"&&(c=void 0);function u(m){var q=(a[m]||"silent").toUpperCase();if(!((typeof window=="undefined"?"undefined":C(window))===e||!c)){try{window.localStorage[c]=q;return}catch(P){}try{window.document.cookie=encodeURIComponent(c)+"="+q+";"}catch(P){}}}function y(){var m;if(!((typeof window=="undefined"?"undefined":C(window))===e||!c)){try{m=window.localStorage[c]}catch(L){}if((typeof m=="undefined"?"undefined":C(m))===e)try{var q=window.document.cookie,P=q.indexOf(encodeURIComponent(c)+"=");P!==-1&&(m=/^([^;]+)/.exec(q.slice(P))[1])}catch(L){}return p.levels[m]===void 0&&(m=void 0),m}}function E(){if(!((typeof window=="undefined"?"undefined":C(window))===e||!c)){try{window.localStorage.removeItem(c);return}catch(m){}try{window.document.cookie=encodeURIComponent(c)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(m){}}}p.name=l,p.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},p.methodFactory=D||h,p.getLevel=function(){return _},p.setLevel=function(m,q){if(typeof m=="string"&&p.levels[m.toUpperCase()]!==void 0&&(m=p.levels[m.toUpperCase()]),typeof m=="number"&&m>=0&&m<=p.levels.SILENT){if(_=m,q!==!1&&u(m),s.call(p,m,l),(typeof console=="undefined"?"undefined":C(console))===e&&m<p.levels.SILENT)return"No console available for logging"}else throw"log.setLevel() called with invalid level: "+m},p.setDefaultLevel=function(m){w=m,y()||p.setLevel(m,!1)},p.resetLevel=function(){p.setLevel(w,!1),E()},p.enableAll=function(m){p.setLevel(p.levels.TRACE,m)},p.disableAll=function(m){p.setLevel(p.levels.SILENT,m)};var k=y();k==null&&(k=w),p.setLevel(k,!1)}var g=new T,x={};g.getLogger=function(w){if((typeof w=="undefined"?"undefined":C(w))!=="symbol"&&typeof w!="string"||w==="")throw new TypeError("You must supply a name when creating a logger.");var D=x[w];return D||(D=x[w]=new T(w,g.getLevel(),g.methodFactory)),D};var v=(typeof window=="undefined"?"undefined":C(window))!==e?window.log:void 0;return g.noConflict=function(){return(typeof window=="undefined"?"undefined":C(window))!==e&&window.log===g&&(window.log=v),g},g.getLoggers=function(){return x},g.default=g,g})});function U(r,e){return e!=null&&typeof Symbol!="undefined"&&e[Symbol.hasInstance]?!!e[Symbol.hasInstance](r):U(r,e)}var Z=ft(function(){Z()});var $t=H(function(Je){"use strict";var Ii=Object.prototype.hasOwnProperty,Li;function Yt(r){try{return decodeURIComponent(r.replace(/\+/g," "))}catch(e){return null}}function Xt(r){try{return encodeURIComponent(r)}catch(e){return null}}function Ni(r){for(var e=/([^=?#&]+)=?([^&]*)/g,t={},a;a=e.exec(r);){var i=Yt(a[1]),n=Yt(a[2]);i===null||n===null||i in t||(t[i]=n)}return t}function Pi(r,e){e=e||"";var t=[],a,i;typeof e!="string"&&(e="?");for(i in r)if(Ii.call(r,i)){if(a=r[i],!a&&(a===null||a===Li||isNaN(a))&&(a=""),i=Xt(i),a=Xt(a),i===null||a===null)continue;t.push(i+"="+a)}return t.length?e+t.join("&"):""}Je.stringify=Pi;Je.parse=Ni});var tr=H(function(Zt,er){"use strict";(function(r){var e=!1;if(typeof define=="function"&&define.amd&&(define(r),e=!0),typeof Zt=="object"&&(er.exports=r(),e=!0),!e){var t=window.Cookies,a=window.Cookies=r();a.noConflict=function(){return window.Cookies=t,a}}})(function(){var r=function(){for(var a=0,i={};a<arguments.length;a++){var n=arguments[a];for(var o in n)i[o]=n[o]}return i};function e(t){function a(i,n,o){var s;if(typeof document!="undefined"){if(arguments.length>1){if(o=r({path:"/"},a.defaults,o),typeof o.expires=="number"){var f=new Date;f.setMilliseconds(f.getMilliseconds()+o.expires*864e5),o.expires=f}try{s=JSON.stringify(n),/^[\{\[]/.test(s)&&(n=s)}catch(w){}return t.write?n=t.write(n,i):n=encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),i=encodeURIComponent(String(i)),i=i.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),i=i.replace(/[\(\)]/g,escape),document.cookie=[i,"=",n,o.expires?"; expires="+o.expires.toUTCString():"",o.path?"; path="+o.path:"",o.domain?"; domain="+o.domain:"",o.secure?"; secure":""].join("")}i||(s={});for(var h=document.cookie?document.cookie.split("; "):[],T=/(%[0-9A-Z]{2})+/g,g=0;g<h.length;g++){var x=h[g].split("="),v=x.slice(1).join("=");v.charAt(0)==='"'&&(v=v.slice(1,-1));try{var l=x[0].replace(T,decodeURIComponent);if(v=t.read?t.read(v,l):t(v,l)||v.replace(T,decodeURIComponent),this.json)try{v=JSON.parse(v)}catch(w){}if(i===l){s=v;break}i||(s[l]=v)}catch(w){}}return s}}return a.set=a,a.get=function(i){return a.call(a,i)},a.getJSON=function(){return a.apply({json:!0},[].slice.call(arguments))},a.defaults={},a.remove=function(i,n){a(i,"",r(n,{expires:-1}))},a.withConverter=e,a}return e(function(){})})});var Ye=H(function(_u,br){var gr=Array.prototype.slice;br.exports=ea;function ea(r,e){for(("length"in r)||(r=[r]),r=gr.call(r);r.length;){var t=r.shift(),a=e(t);if(a)return a;t.childNodes&&t.childNodes.length&&(r=gr.call(t.childNodes).concat(r))}}});var Tr=H(function(vu,wr){Z();wr.exports=pe;function pe(r,e){if(!U(this,pe))return new pe(r,e);this.data=r,this.nodeValue=r,this.length=r.length,this.ownerDocument=e||null}pe.prototype.nodeType=8;pe.prototype.nodeName="#comment";pe.prototype.toString=function(){return"[object Comment]"}});var kr=H(function(hu,Er){Z();Er.exports=re;function re(r,e){if(!U(this,re))return new re(r);this.data=r||"",this.length=this.data.length,this.ownerDocument=e||null}re.prototype.type="DOMTextNode";re.prototype.nodeType=3;re.prototype.nodeName="#text";re.prototype.toString=function(){return this.data};re.prototype.replaceData=function(e,t,a){var i=this.data,n=i.substring(0,e),o=i.substring(e+t,i.length);this.data=n+a+o,this.length=this.data.length}});var Xe=H(function(yu,xr){xr.exports=ta;function ta(r){var e=this,t=r.type;r.target||(r.target=e),e.listeners||(e.listeners={});var a=e.listeners[t];if(a)return a.forEach(function(i){r.currentTarget=e,typeof i=="function"?i(r):i.handleEvent(r)});e.parentNode&&e.parentNode.dispatchEvent(r)}});var $e=H(function(gu,Dr){Dr.exports=ra;function ra(r,e){var t=this;t.listeners||(t.listeners={}),t.listeners[r]||(t.listeners[r]=[]),t.listeners[r].indexOf(e)===-1&&t.listeners[r].push(e)}});var Ze=H(function(bu,Sr){Sr.exports=ia;function ia(r,e){var t=this;if(t.listeners&&t.listeners[r]){var a=t.listeners[r],i=a.indexOf(e);i!==-1&&a.splice(i,1)}}});var Or=H(function(Tu,Ar){ke();Ar.exports=Rr;var aa=["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"];function Rr(r){switch(r.nodeType){case 3:return et(r.data);case 8:return"<!--"+r.data+"-->";default:return na(r)}}function na(r){var e=[],t=r.tagName;return r.namespaceURI==="http://www.w3.org/1999/xhtml"&&(t=t.toLowerCase()),e.push("<"+t+da(r)+ua(r)),aa.indexOf(t)>-1?e.push(" />"):(e.push(">"),r.childNodes.length?e.push.apply(e,r.childNodes.map(Rr)):r.textContent||r.innerText?e.push(et(r.textContent||r.innerText)):r.innerHTML&&e.push(r.innerHTML),e.push("</"+t+">")),e.join("")}function oa(r,e){var t=C(r[e]);return e==="style"&&Object.keys(r.style).length>0?!0:r.hasOwnProperty(e)&&(t==="string"||t==="boolean"||t==="number")&&e!=="nodeName"&&e!=="className"&&e!=="tagName"&&e!=="textContent"&&e!=="innerText"&&e!=="namespaceURI"&&e!=="innerHTML"}function sa(r){if(typeof r=="string")return r;var e="";return Object.keys(r).forEach(function(t){var a=r[t];t=t.replace(/[A-Z]/g,function(i){return"-"+i.toLowerCase()}),e+=t+":"+a+";"}),e}function ua(r){var e=r.dataset,t=[];for(var a in e)t.push({name:"data-"+a,value:e[a]});return t.length?qr(t):""}function qr(r){var e=[];return r.forEach(function(t){var a=t.name,i=t.value;a==="style"&&(i=sa(i)),e.push(a+'="'+la(i)+'"')}),e.length?" "+e.join(" "):""}function da(r){var e=[];for(var t in r)oa(r,t)&&e.push({name:t,value:r[t]});for(var a in r._attributes)for(var i in r._attributes[a]){var n=r._attributes[a][i],o=(n.prefix?n.prefix+":":"")+i;e.push({name:o,value:n.value})}return r.className&&e.push({name:"class",value:r.className}),e.length?qr(e):""}function et(r){var e="";return typeof r=="string"?e=r:r&&(e=r.toString()),e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function la(r){return et(r).replace(/"/g,"&quot;")}});var rt=H(function(ku,Lr){Z();var tt=Ye(),ca=Xe(),fa=$e(),_a=Ze(),pa=Or(),Ir="http://www.w3.org/1999/xhtml";Lr.exports=N;function N(r,e,t){if(!U(this,N))return new N(r);var a=t===void 0?Ir:t||null;this.tagName=a===Ir?String(r).toUpperCase():r,this.nodeName=this.tagName,this.className="",this.dataset={},this.childNodes=[],this.parentNode=null,this.style={},this.ownerDocument=e||null,this.namespaceURI=a,this._attributes={},this.tagName==="INPUT"&&(this.type="text")}N.prototype.type="DOMElement";N.prototype.nodeType=1;N.prototype.appendChild=function(e){return e.parentNode&&e.parentNode.removeChild(e),this.childNodes.push(e),e.parentNode=this,e};N.prototype.replaceChild=function(e,t){e.parentNode&&e.parentNode.removeChild(e);var a=this.childNodes.indexOf(t);return t.parentNode=null,this.childNodes[a]=e,e.parentNode=this,t};N.prototype.removeChild=function(e){var t=this.childNodes.indexOf(e);return this.childNodes.splice(t,1),e.parentNode=null,e};N.prototype.insertBefore=function(e,t){e.parentNode&&e.parentNode.removeChild(e);var a=t==null?-1:this.childNodes.indexOf(t);return a>-1?this.childNodes.splice(a,0,e):this.childNodes.push(e),e.parentNode=this,e};N.prototype.setAttributeNS=function(e,t,a){var i=null,n=t,o=t.indexOf(":");if(o>-1&&(i=t.substr(0,o),n=t.substr(o+1)),this.tagName==="INPUT"&&t==="type")this.type=a;else{var s=this._attributes[e]||(this._attributes[e]={});s[n]={value:a,prefix:i}}};N.prototype.getAttributeNS=function(e,t){var a=this._attributes[e],i=a&&a[t]&&a[t].value;return this.tagName==="INPUT"&&t==="type"?this.type:typeof i!="string"?null:i};N.prototype.removeAttributeNS=function(e,t){var a=this._attributes[e];a&&delete a[t]};N.prototype.hasAttributeNS=function(e,t){var a=this._attributes[e];return!!a&&t in a};N.prototype.setAttribute=function(e,t){return this.setAttributeNS(null,e,t)};N.prototype.getAttribute=function(e){return this.getAttributeNS(null,e)};N.prototype.removeAttribute=function(e){return this.removeAttributeNS(null,e)};N.prototype.hasAttribute=function(e){return this.hasAttributeNS(null,e)};N.prototype.removeEventListener=_a;N.prototype.addEventListener=fa;N.prototype.dispatchEvent=ca;N.prototype.focus=function(){};N.prototype.toString=function(){return pa(this)};N.prototype.getElementsByClassName=function(e){var t=e.split(" "),a=[];return tt(this,function(i){if(i.nodeType===1){var n=i.className||"",o=n.split(" ");t.every(function(s){return o.indexOf(s)!==-1})&&a.push(i)}}),a};N.prototype.getElementsByTagName=function(e){e=e.toLowerCase();var t=[];return tt(this.childNodes,function(a){a.nodeType===1&&(e==="*"||a.tagName.toLowerCase()===e)&&t.push(a)}),t};N.prototype.contains=function(e){return tt(this,function(t){return e===t})||!1}});var Pr=H(function(Du,Nr){Z();var it=rt();Nr.exports=z;function z(r){if(!U(this,z))return new z;this.childNodes=[],this.parentNode=null,this.ownerDocument=r||null}z.prototype.type="DocumentFragment";z.prototype.nodeType=11;z.prototype.nodeName="#document-fragment";z.prototype.appendChild=it.prototype.appendChild;z.prototype.replaceChild=it.prototype.replaceChild;z.prototype.removeChild=it.prototype.removeChild;z.prototype.toString=function(){return this.childNodes.map(function(e){return String(e)}).join("")}});var Mr=H(function(Su,Cr){Cr.exports=at;function at(r){}at.prototype.initEvent=function(e,t,a){this.type=e,this.bubbles=t,this.cancelable=a};at.prototype.preventDefault=function(){}});var Br=H(function(qu,Hr){Z();var va=Ye(),ma=Tr(),ha=kr(),Se=rt(),ya=Pr(),ga=Mr(),ba=Xe(),wa=$e(),Ta=Ze();Hr.exports=Be;function Be(){if(!U(this,Be))return new Be;this.head=this.createElement("head"),this.body=this.createElement("body"),this.documentElement=this.createElement("html"),this.documentElement.appendChild(this.head),this.documentElement.appendChild(this.body),this.childNodes=[this.documentElement],this.nodeType=9}var V=Be.prototype;V.createTextNode=function(e){return new ha(e,this)};V.createElementNS=function(e,t){var a=e===null?null:String(e);return new Se(t,this,a)};V.createElement=function(e){return new Se(e,this)};V.createDocumentFragment=function(){return new ya(this)};V.createEvent=function(e){return new ga(e)};V.createComment=function(e){return new ma(e,this)};V.getElementById=function(e){e=String(e);var t=va(this.childNodes,function(a){if(String(a.id)===e)return a});return t||null};V.getElementsByClassName=Se.prototype.getElementsByClassName;V.getElementsByTagName=Se.prototype.getElementsByTagName;V.contains=Se.prototype.contains;V.removeEventListener=Ta;V.addEventListener=wa;V.dispatchEvent=ba});var Fr=H(function(Au,Ur){var Ea=Br();Ur.exports=new Ea});var jr=H(function(Ou,Wr){var Vr=typeof global!="undefined"?global:typeof window!="undefined"?window:{},ka=Fr(),Re;typeof document!="undefined"?Re=document:(Re=Vr["__GLOBAL_DOCUMENT_CACHE@4"],Re||(Re=Vr["__GLOBAL_DOCUMENT_CACHE@4"]=ka));Wr.exports=Re});var Ba={};ai(Ba,{default:function(){return Ha}});module.exports=ni(Ba);function pt(r){if(Array.isArray(r))return r}function vt(r,e){var t=r==null?null:typeof Symbol!="undefined"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var a=[],i=!0,n=!1,o,s;try{for(t=t.call(r);!(i=(o=t.next()).done)&&(a.push(o.value),!(e&&a.length===e));i=!0);}catch(f){n=!0,s=f}finally{try{!i&&t.return!=null&&t.return()}finally{if(n)throw s}}return a}}function mt(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function je(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,a=new Array(e);t<e;t++)a[t]=r[t];return a}function ht(r,e){if(r){if(typeof r=="string")return je(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(t);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return je(r,e)}}function j(r,e){return pt(r)||vt(r,e)||ht(r,e)||mt()}var ye=B(J());var X=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.random()*16|0,a=e==="x"?t:t&3|8;return a.toString(16)})},Ae=function(){return("000000"+(Math.random()*Math.pow(36,6)<<0).toString(36)).slice(-6)};var $=function(e){if(e&&typeof e.nodeName!="undefined")return e.muxId||(e.muxId=Ae()),e.muxId;var t;try{t=document.querySelector(e)}catch(a){}return t&&!t.muxId&&(t.muxId=e),(t==null?void 0:t.muxId)||e},Ee=function(e){var t;e&&typeof e.nodeName!="undefined"?(t=e,e=$(t)):t=document.querySelector(e);var a=t&&t.nodeName?t.nodeName.toLowerCase():"";return[t,e,a]};var ue=B(bt()),oi=ue.default.methodFactory;ue.default.methodFactory=function(r,e,t){var a=oi(r,e,t);return function(){for(var i=["[mux]"],n=0;n<arguments.length;n++)i.push(arguments[n]);a.apply(void 0,i)}};ue.default.setLevel(ue.default.getLevel());var I=ue.default;var Ie=B(J());function de(){var r=Ie.default.doNotTrack||Ie.default.navigator&&Ie.default.navigator.doNotTrack;return r==="1"}var wt=B(J()),si={now:function(){var r=wt.default.performance,e=r&&r.timing,t=e&&e.navigationStart,a=typeof t=="number"&&typeof r.now=="function"?t+r.now():Date.now();return Math.round(a)}},A=si;function b(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}Z();function S(r,e){if(!U(r,e))throw new TypeError("Cannot call a class as a function")}function Tt(r,e){for(var t=0;t<e.length;t++){var a=e[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(r,a.key,a)}}function M(r,e,t){return e&&Tt(r.prototype,e),t&&Tt(r,t),r}function d(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Le(r,e){return Le=Object.setPrototypeOf||function(a,i){return a.__proto__=i,a},Le(r,e)}function Et(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),e&&Le(r,e)}function xe(r){return xe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},xe(r)}function kt(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(r){return!1}}ke();function xt(r,e){return e&&(C(e)==="object"||typeof e=="function")?e:b(r)}function Dt(r){var e=kt();return function(){var a=xe(r),i;if(e){var n=xe(this).constructor;i=Reflect.construct(a,arguments,n)}else i=a.apply(this,arguments);return xt(this,i)}}var F=function(r){return ee(r)[0]};var ee=function(r){if(typeof r!="string"||r==="")return["localhost"];var e=/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,t=r.match(e)||[],a=t[4],i;return a&&(i=(a.match(/[^\.]+\.[^\.]+$/)||[])[0]),[a,i]};var Ne=B(J()),ui={exists:function(){var r=Ne.default.performance,e=r&&r.timing;return e!==void 0},domContentLoadedEventEnd:function(){var r=Ne.default.performance,e=r&&r.timing;return e&&e.domContentLoadedEventEnd},navigationStart:function(){var r=Ne.default.performance,e=r&&r.timing;return e&&e.navigationStart}},le=ui;function O(r,e,t){t=t===void 0?1:t,r[e]=r[e]||0,r[e]+=t}function ne(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},a=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),a.forEach(function(i){d(r,i,t[i])})}return r}function di(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,a)}return t}function ce(r,e){return e=e!=null?e:{},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):di(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))}),r}var li=["x-cdn","content-type"],St=["x-request-id","cf-ray","x-amz-cf-id","x-akamai-request-id"],ci=li.concat(St);function fe(r){r=r||"";var e={},t=r.trim().split(/[\r\n]+/);return t.forEach(function(a){if(a){var i=a.split(": "),n=i.shift();n&&(ci.indexOf(n.toLowerCase())>=0||n.toLowerCase().indexOf("x-litix-")===0)&&(e[n]=i.join(": "))}}),e}function oe(r){if(r){var e=St.find(function(t){return r[t]!==void 0});return e?r[e]:void 0}}var fi=function(r){var e={};for(var t in r){var a=r[t],i=a["DATA-ID"].search("io.litix.data.");if(i!==-1){var n=a["DATA-ID"].replace("io.litix.data.","");e[n]=a.VALUE}}return e},Pe=fi;var Ce=function(r){if(!r)return{};var e=le.navigationStart(),t=r.loading,a=t?t.start:r.trequest,i=t?t.first:r.tfirst,n=t?t.end:r.tload;return{bytesLoaded:r.total,requestStart:Math.round(e+a),responseStart:Math.round(e+i),responseEnd:Math.round(e+n)}},De=function(r){if(!(!r||typeof r.getAllResponseHeaders!="function"))return fe(r.getAllResponseHeaders())},Rt=function(r,e,t){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},i=arguments.length>4?arguments[4]:void 0,n=r.log,o=r.utils.secondsToMs,s=function(p){var _=parseInt(i.version),c;return _===1&&p.programDateTime!==null&&(c=p.programDateTime),_===0&&p.pdt!==null&&(c=p.pdt),c};if(!le.exists()){n.warn("performance timing not supported. Not tracking HLS.js.");return}var f=function(p,_){return r.emit(e,p,_)},h=function(p,_){var c=_.levels,u=_.audioTracks,y=_.url,E=_.stats,k=_.networkDetails,m=_.sessionData,q={},P={};c.forEach(function(W,ae){q[ae]={width:W.width,height:W.height,bitrate:W.bitrate,attrs:W.attrs}}),u.forEach(function(W,ae){P[ae]={name:W.name,language:W.lang,bitrate:W.bitrate}});var L=Ce(E),R=L.bytesLoaded,Y=L.requestStart,ge=L.responseStart,be=L.responseEnd;f("requestcompleted",ce(ne({},Pe(m)),{request_event_type:p,request_bytes_loaded:R,request_start:Y,request_response_start:ge,request_response_end:be,request_type:"manifest",request_hostname:F(y),request_response_headers:De(k),request_rendition_lists:{media:q,audio:P,video:{}}}))};t.on(i.Events.MANIFEST_LOADED,h);var T=function(p,_){var c=_.details,u=_.level,y=_.networkDetails,E=_.stats,k=Ce(E),m=k.bytesLoaded,q=k.requestStart,P=k.responseStart,L=k.responseEnd,R=c.fragments[c.fragments.length-1],Y=s(R)+o(R.duration);f("requestcompleted",{request_event_type:p,request_bytes_loaded:m,request_start:q,request_response_start:P,request_response_end:L,request_current_level:u,request_type:"manifest",request_hostname:F(c.url),request_response_headers:De(y),video_holdback:c.holdBack&&o(c.holdBack),video_part_holdback:c.partHoldBack&&o(c.partHoldBack),video_part_target_duration:c.partTarget&&o(c.partTarget),video_target_duration:c.targetduration&&o(c.targetduration),video_source_is_live:c.live,player_manifest_newest_program_time:isNaN(Y)?void 0:Y})};t.on(i.Events.LEVEL_LOADED,T);var g=function(p,_){var c=_.details,u=_.networkDetails,y=_.stats,E=Ce(y),k=E.bytesLoaded,m=E.requestStart,q=E.responseStart,P=E.responseEnd;f("requestcompleted",{request_event_type:p,request_bytes_loaded:k,request_start:m,request_response_start:q,request_response_end:P,request_type:"manifest",request_hostname:F(c.url),request_response_headers:De(u)})};t.on(i.Events.AUDIO_TRACK_LOADED,g);var x=function(p,_){var c=_.stats,u=_.networkDetails,y=_.frag;c=c||y.stats;var E=Ce(c),k=E.bytesLoaded,m=E.requestStart,q=E.responseStart,P=E.responseEnd,L=u?De(u):void 0,R={request_event_type:p,request_bytes_loaded:k,request_start:m,request_response_start:q,request_response_end:P,request_hostname:u?F(u.responseURL):void 0,request_id:L?oe(L):void 0,request_response_headers:L,request_media_duration:y.duration,request_url:u==null?void 0:u.responseURL};y.type==="main"?(R.request_type="media",R.request_current_level=y.level,R.request_video_width=(t.levels[y.level]||{}).width,R.request_video_height=(t.levels[y.level]||{}).height,R.request_labeled_bitrate=(t.levels[y.level]||{}).bitrate):R.request_type=y.type,f("requestcompleted",R)};t.on(i.Events.FRAG_LOADED,x);var v=function(p,_){var c=_.frag,u=c.start,y=s(c),E={currentFragmentPDT:y,currentFragmentStart:o(u)};f("fragmentchange",E)};t.on(i.Events.FRAG_CHANGED,v);var l=function(p,_){var c=_.type,u=_.details,y=_.response,E=_.fatal,k=_.frag,m=_.networkDetails,q=(k==null?void 0:k.url)||_.url||"",P=m?De(m):void 0;if((u===i.ErrorDetails.MANIFEST_LOAD_ERROR||u===i.ErrorDetails.MANIFEST_LOAD_TIMEOUT||u===i.ErrorDetails.FRAG_LOAD_ERROR||u===i.ErrorDetails.FRAG_LOAD_TIMEOUT||u===i.ErrorDetails.LEVEL_LOAD_ERROR||u===i.ErrorDetails.LEVEL_LOAD_TIMEOUT||u===i.ErrorDetails.AUDIO_TRACK_LOAD_ERROR||u===i.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT||u===i.ErrorDetails.SUBTITLE_LOAD_ERROR||u===i.ErrorDetails.SUBTITLE_LOAD_TIMEOUT||u===i.ErrorDetails.KEY_LOAD_ERROR||u===i.ErrorDetails.KEY_LOAD_TIMEOUT)&&f("requestfailed",{request_error:u,request_url:q,request_hostname:F(q),request_id:P?oe(P):void 0,request_type:u===i.ErrorDetails.FRAG_LOAD_ERROR||u===i.ErrorDetails.FRAG_LOAD_TIMEOUT?"media":u===i.ErrorDetails.AUDIO_TRACK_LOAD_ERROR||u===i.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT?"audio":u===i.ErrorDetails.SUBTITLE_LOAD_ERROR||u===i.ErrorDetails.SUBTITLE_LOAD_TIMEOUT?"subtitle":u===i.ErrorDetails.KEY_LOAD_ERROR||u===i.ErrorDetails.KEY_LOAD_TIMEOUT?"encryption":"manifest",request_error_code:y==null?void 0:y.code,request_error_text:y==null?void 0:y.text}),E){var L,R="".concat(q?"url: ".concat(q,"\n"):"")+"".concat(y&&(y.code||y.text)?"response: ".concat(y.code,", ").concat(y.text,"\n"):"")+"".concat(_.reason?"failure reason: ".concat(_.reason,"\n"):"")+"".concat(_.level?"level: ".concat(_.level,"\n"):"")+"".concat(_.parent?"parent stream controller: ".concat(_.parent,"\n"):"")+"".concat(_.buffer?"buffer length: ".concat(_.buffer,"\n"):"")+"".concat(_.error?"error: ".concat(_.error,"\n"):"")+"".concat(_.event?"event: ".concat(_.event,"\n"):"")+"".concat(_.err?"error message: ".concat((L=_.err)===null||L===void 0?void 0:L.message,"\n"):"");f("error",{player_error_code:c,player_error_message:u,player_error_context:R})}};t.on(i.Events.ERROR,l);var w=function(p,_){var c=_.frag,u=c&&c._url||"";f("requestcanceled",{request_event_type:p,request_url:u,request_type:"media",request_hostname:F(u)})};t.on(i.Events.FRAG_LOAD_EMERGENCY_ABORTED,w);var D=function(p,_){var c=_.level,u=t.levels[c];if(u&&u.attrs&&u.attrs.BANDWIDTH){var y=u.attrs.BANDWIDTH,E,k=parseFloat(u.attrs["FRAME-RATE"]);isNaN(k)||(E=k),y?f("renditionchange",{video_source_fps:E,video_source_bitrate:y,video_source_width:u.width,video_source_height:u.height,video_source_rendition_name:u.name,video_source_codec:u==null?void 0:u.videoCodec}):n.warn("missing BANDWIDTH from HLS manifest parsed by HLS.js")}};t.on(i.Events.LEVEL_SWITCHED,D),t._stopMuxMonitor=function(){t.off(i.Events.MANIFEST_LOADED,h),t.off(i.Events.LEVEL_LOADED,T),t.off(i.Events.AUDIO_TRACK_LOADED,g),t.off(i.Events.FRAG_LOADED,x),t.off(i.Events.FRAG_CHANGED,v),t.off(i.Events.ERROR,l),t.off(i.Events.FRAG_LOAD_EMERGENCY_ABORTED,w),t.off(i.Events.LEVEL_SWITCHED,D),t.off(i.Events.DESTROYING,t._stopMuxMonitor),delete t._stopMuxMonitor},t.on(i.Events.DESTROYING,t._stopMuxMonitor)},qt=function(r){r&&typeof r._stopMuxMonitor=="function"&&r._stopMuxMonitor()};var At=function(r,e){if(!r||!r.requestEndDate)return{};var t=F(r.url),a=r.url,i=r.bytesLoaded,n=new Date(r.requestStartDate).getTime(),o=new Date(r.firstByteDate).getTime(),s=new Date(r.requestEndDate).getTime(),f=isNaN(r.duration)?0:r.duration,h=typeof e.getMetricsFor=="function"?e.getMetricsFor(r.mediaType).HttpList:e.getDashMetrics().getHttpRequests(r.mediaType),T;h.length>0&&(T=fe(h[h.length-1]._responseHeaders||""));var g=T?oe(T):void 0;return{requestStart:n,requestResponseStart:o,requestResponseEnd:s,requestBytesLoaded:i,requestResponseHeaders:T,requestMediaDuration:f,requestHostname:t,requestUrl:a,requestId:g}},_i=function(r,e){var t=e.getQualityFor(r),a=e.getCurrentTrackFor(r).bitrateList;return a?{currentLevel:t,renditionWidth:a[t].width||null,renditionHeight:a[t].height||null,renditionBitrate:a[t].bandwidth}:{}},pi=function(r){var e;return(e=r.match(/.*codecs\*?="(.*)"/))===null||e===void 0?void 0:e[1]},vi=function(e){try{var t,a,i=(a=e.getVersion)===null||a===void 0||(t=a.call(e))===null||t===void 0?void 0:t.split(".").map(function(n){return parseInt(n)})[0];return i}catch(n){return!1}},Ot=function(r,e,t){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},i=r.log;if(!t||!t.on){i.warn("Invalid dash.js player reference. Monitoring blocked.");return}var n=vi(t),o=function(c,u){return r.emit(e,c,u)},s=function(c){var u=c.type,y=c.data,E=(y||{}).url;o("requestcompleted",{request_event_type:u,request_start:0,request_response_start:0,request_response_end:0,request_bytes_loaded:-1,request_type:"manifest",request_hostname:F(E),request_url:E})};t.on("manifestLoaded",s);var f={},h=function(c){if(typeof c.getRequests!="function")return null;var u=c.getRequests({state:"executed"});return u.length===0?null:u[u.length-1]},T=function(c){var u=c.type,y=c.fragmentModel,E=c.chunk,k=h(y);g({type:u,request:k,chunk:E})},g=function(c){var u=c.type,y=c.chunk,E=c.request,k=(y||{}).mediaInfo,m=k||{},q=m.type,P=m.bitrateList;P=P||[];var L={};P.forEach(function(we,Q){L[Q]={},L[Q].width=we.width,L[Q].height=we.height,L[Q].bitrate=we.bandwidth,L[Q].attrs={}}),q==="video"?f.video=L:q==="audio"?f.audio=L:f.media=L;var R=At(E,t),Y=R.requestStart,ge=R.requestResponseStart,be=R.requestResponseEnd,W=R.requestResponseHeaders,ae=R.requestMediaDuration,Fe=R.requestHostname,Ve=R.requestUrl,We=R.requestId;o("requestcompleted",{request_event_type:u,request_start:Y,request_response_start:ge,request_response_end:be,request_bytes_loaded:-1,request_type:q+"_init",request_response_headers:W,request_hostname:Fe,request_id:We,request_url:Ve,request_media_duration:ae,request_rendition_lists:f})};n>=4?t.on("initFragmentLoaded",g):t.on("initFragmentLoaded",T);var x=function(c){var u=c.type,y=c.fragmentModel,E=c.chunk,k=h(y);v({type:u,request:k,chunk:E})},v=function(c){var u=c.type,y=c.chunk,E=c.request,k=y||{},m=k.mediaInfo,q=k.start,P=m||{},L=P.type,R=At(E,t),Y=R.requestStart,ge=R.requestResponseStart,be=R.requestResponseEnd,W=R.requestBytesLoaded,ae=R.requestResponseHeaders,Fe=R.requestMediaDuration,Ve=R.requestHostname,We=R.requestUrl,we=R.requestId,Q=_i(L,t),Kr=Q.currentLevel,Yr=Q.renditionWidth,Xr=Q.renditionHeight,$r=Q.renditionBitrate;o("requestcompleted",{request_event_type:u,request_start:Y,request_response_start:ge,request_response_end:be,request_bytes_loaded:W,request_type:L,request_response_headers:ae,request_hostname:Ve,request_id:we,request_url:We,request_media_start_time:q,request_media_duration:Fe,request_current_level:Kr,request_labeled_bitrate:$r,request_video_width:Yr,request_video_height:Xr})};n>=4?t.on("mediaFragmentLoaded",v):t.on("mediaFragmentLoaded",x);var l={video:void 0,audio:void 0,totalBitrate:void 0},w=function(){if(l.video&&typeof l.video.bitrate=="number"){if(!(l.video.width&&l.video.height)){i.warn("have bitrate info for video but missing width/height");return}var c=l.video.bitrate;if(l.audio&&typeof l.audio.bitrate=="number"&&(c+=l.audio.bitrate),c!==l.totalBitrate)return l.totalBitrate=c,{video_source_bitrate:c,video_source_height:l.video.height,video_source_width:l.video.width,video_source_codec:pi(l.video.codec)}}},D=function(c,u,y){if(typeof c.newQuality!="number"){i.warn("missing evt.newQuality in qualityChangeRendered event",c);return}var E=c.mediaType;if(E==="audio"||E==="video"){var k=t.getBitrateInfoListFor(E).find(function(q){var P=q.qualityIndex;return P===c.newQuality});if(!(k&&typeof k.bitrate=="number")){i.warn("missing bitrate info for ".concat(E));return}l[E]=ce(ne({},k),{codec:t.getCurrentTrackFor(E).codec});var m=w();m&&o("renditionchange",m)}};t.on("qualityChangeRendered",D);var p=function(c){var u=c.request,y=c.mediaType;u=u||{},o("requestcanceled",{request_event_type:u.type+"_"+u.action,request_url:u.url,request_type:y,request_hostname:F(u.url)})};t.on("fragmentLoadingAbandoned",p);var _=function(c){var u=c.error,y,E,k=(u==null||(y=u.data)===null||y===void 0?void 0:y.request)||{},m=(u==null||(E=u.data)===null||E===void 0?void 0:E.response)||{};(u==null?void 0:u.code)===27&&o("requestfailed",{request_error:k.type+"_"+k.action,request_url:k.url,request_hostname:F(k.url),request_type:k.mediaType,request_error_code:m.status,request_error_text:m.statusText});var q="".concat(k!=null&&k.url?"url: ".concat(k.url,"\n"):"")+"".concat(m!=null&&m.status||m!=null&&m.statusText?"response: ".concat(m==null?void 0:m.status,", ").concat(m==null?void 0:m.statusText,"\n"):"");o("error",{player_error_code:u==null?void 0:u.code,player_error_message:u==null?void 0:u.message,player_error_context:q})};t.on("error",_),t._stopMuxMonitor=function(){t.off("manifestLoaded",s),t.off("initFragmentLoaded",g),t.off("mediaFragmentLoaded",v),t.off("qualityChangeRendered",D),t.off("error",_),t.off("fragmentLoadingAbandoned",p),delete t._stopMuxMonitor}},It=function(r){r&&typeof r._stopMuxMonitor=="function"&&r._stopMuxMonitor()};var Lt=0,mi=function(){"use strict";function r(){S(this,r),d(this,"_listeners",void 0)}return M(r,[{key:"on",value:function(t,a,i){return a._eventEmitterGuid=a._eventEmitterGuid||++Lt,this._listeners=this._listeners||{},this._listeners[t]=this._listeners[t]||[],i&&(a=a.bind(i)),this._listeners[t].push(a),a}},{key:"off",value:function(t,a){var i=this._listeners&&this._listeners[t];i&&i.forEach(function(n,o){n._eventEmitterGuid===a._eventEmitterGuid&&i.splice(o,1)})}},{key:"one",value:function(t,a,i){var n=this;a._eventEmitterGuid=a._eventEmitterGuid||++Lt;var o=function(){n.off(t,o),a.apply(i||this,arguments)};o._eventEmitterGuid=a._eventEmitterGuid,this.on(t,o)}},{key:"emit",value:function(t,a){var i=this;if(this._listeners){a=a||{};var n=this._listeners["before*"]||[],o=this._listeners[t]||[],s=this._listeners["after"+t]||[],f=function(h,T){h=h.slice(),h.forEach(function(g){g.call(i,{type:t},T)})};f(n,a),f(o,a),f(s,a)}}}]),r}(),Nt=mi;var Me=B(J()),hi=function(){"use strict";function r(e){var t=this;S(this,r),d(this,"_playbackHeartbeatInterval",void 0),d(this,"_playheadShouldBeProgressing",void 0),d(this,"pm",void 0),this.pm=e,this._playbackHeartbeatInterval=null,this._playheadShouldBeProgressing=!1,e.on("playing",function(){t._playheadShouldBeProgressing=!0}),e.on("play",this._startPlaybackHeartbeatInterval.bind(this)),e.on("playing",this._startPlaybackHeartbeatInterval.bind(this)),e.on("adbreakstart",this._startPlaybackHeartbeatInterval.bind(this)),e.on("adplay",this._startPlaybackHeartbeatInterval.bind(this)),e.on("adplaying",this._startPlaybackHeartbeatInterval.bind(this)),e.on("devicewake",this._startPlaybackHeartbeatInterval.bind(this)),e.on("viewstart",this._startPlaybackHeartbeatInterval.bind(this)),e.on("rebufferstart",this._startPlaybackHeartbeatInterval.bind(this)),e.on("pause",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("ended",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("viewend",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("error",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("aderror",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("adpause",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("adended",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("adbreakend",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("seeked",function(){e.data.player_is_paused?t._stopPlaybackHeartbeatInterval():t._startPlaybackHeartbeatInterval()}),e.on("timeupdate",function(){t._playbackHeartbeatInterval!==null&&e.emit("playbackheartbeat")}),e.on("devicesleep",function(a,i){t._playbackHeartbeatInterval!==null&&(Me.default.clearInterval(t._playbackHeartbeatInterval),e.emit("playbackheartbeatend",{viewer_time:i.viewer_time}),t._playbackHeartbeatInterval=null)})}return M(r,[{key:"_startPlaybackHeartbeatInterval",value:function(){var t=this;this._playbackHeartbeatInterval===null&&(this.pm.emit("playbackheartbeat"),this._playbackHeartbeatInterval=Me.default.setInterval(function(){t.pm.emit("playbackheartbeat")},this.pm.playbackHeartbeatTime))}},{key:"_stopPlaybackHeartbeatInterval",value:function(){this._playheadShouldBeProgressing=!1,this._playbackHeartbeatInterval!==null&&(Me.default.clearInterval(this._playbackHeartbeatInterval),this.pm.emit("playbackheartbeatend"),this._playbackHeartbeatInterval=null)}}]),r}(),Pt=hi;var yi=function r(e){"use strict";var t=this;S(this,r),d(this,"viewErrored",void 0),e.on("viewinit",function(){t.viewErrored=!1}),e.on("error",function(a,i){try{var n=e.errorTranslator({player_error_code:i.player_error_code,player_error_message:i.player_error_message,player_error_context:i.player_error_context,player_error_severity:i.player_error_severity,player_error_business_exception:i.player_error_business_exception});n&&(e.data.player_error_code=n.player_error_code||i.player_error_code,e.data.player_error_message=n.player_error_message||i.player_error_message,e.data.player_error_context=n.player_error_context||i.player_error_context,e.data.player_error_severity=n.player_error_severity||i.player_error_severity,e.data.player_error_business_exception=n.player_error_business_exception||i.player_error_business_exception,t.viewErrored=!0)}catch(o){e.mux.log.warn("Exception in error translator callback.",o),t.viewErrored=!0}}),e.on("aftererror",function(){var a,i,n,o,s;(a=e.data)===null||a===void 0||delete a.player_error_code,(i=e.data)===null||i===void 0||delete i.player_error_message,(n=e.data)===null||n===void 0||delete n.player_error_context,(o=e.data)===null||o===void 0||delete o.player_error_severity,(s=e.data)===null||s===void 0||delete s.player_error_business_exception})},Ct=yi;var gi=function(){"use strict";function r(e){S(this,r),d(this,"_watchTimeTrackerLastCheckedTime",void 0),d(this,"pm",void 0),this.pm=e,this._watchTimeTrackerLastCheckedTime=null,e.on("playbackheartbeat",this._updateWatchTime.bind(this)),e.on("playbackheartbeatend",this._clearWatchTimeState.bind(this))}return M(r,[{key:"_updateWatchTime",value:function(t,a){var i=a.viewer_time;this._watchTimeTrackerLastCheckedTime===null&&(this._watchTimeTrackerLastCheckedTime=i),O(this.pm.data,"view_watch_time",i-this._watchTimeTrackerLastCheckedTime),this._watchTimeTrackerLastCheckedTime=i}},{key:"_clearWatchTimeState",value:function(t,a){this._updateWatchTime(t,a),this._watchTimeTrackerLastCheckedTime=null}}]),r}(),Mt=gi;var bi=function(){"use strict";function r(e){var t=this;S(this,r),d(this,"_playbackTimeTrackerLastPlayheadPosition",void 0),d(this,"_lastTime",void 0),d(this,"_isAdPlaying",void 0),d(this,"_callbackUpdatePlaybackTime",void 0),d(this,"pm",void 0),this.pm=e,this._playbackTimeTrackerLastPlayheadPosition=-1,this._lastTime=A.now(),this._isAdPlaying=!1,this._callbackUpdatePlaybackTime=null;var a=this._startPlaybackTimeTracking.bind(this);e.on("playing",a),e.on("adplaying",a),e.on("seeked",a);var i=this._stopPlaybackTimeTracking.bind(this);e.on("playbackheartbeatend",i),e.on("seeking",i),e.on("adplaying",function(){t._isAdPlaying=!0}),e.on("adended",function(){t._isAdPlaying=!1}),e.on("adpause",function(){t._isAdPlaying=!1}),e.on("adbreakstart",function(){t._isAdPlaying=!1}),e.on("adbreakend",function(){t._isAdPlaying=!1}),e.on("adplay",function(){t._isAdPlaying=!1}),e.on("viewinit",function(){t._playbackTimeTrackerLastPlayheadPosition=-1,t._lastTime=A.now(),t._isAdPlaying=!1,t._callbackUpdatePlaybackTime=null})}return M(r,[{key:"_startPlaybackTimeTracking",value:function(){this._callbackUpdatePlaybackTime===null&&(this._callbackUpdatePlaybackTime=this._updatePlaybackTime.bind(this),this._playbackTimeTrackerLastPlayheadPosition=this.pm.data.player_playhead_time,this.pm.on("playbackheartbeat",this._callbackUpdatePlaybackTime))}},{key:"_stopPlaybackTimeTracking",value:function(){this._callbackUpdatePlaybackTime&&(this._updatePlaybackTime(),this.pm.off("playbackheartbeat",this._callbackUpdatePlaybackTime),this._callbackUpdatePlaybackTime=null,this._playbackTimeTrackerLastPlayheadPosition=-1)}},{key:"_updatePlaybackTime",value:function(){var t=this.pm.data.player_playhead_time,a=A.now(),i=-1;this._playbackTimeTrackerLastPlayheadPosition>=0&&t>this._playbackTimeTrackerLastPlayheadPosition?i=t-this._playbackTimeTrackerLastPlayheadPosition:this._isAdPlaying&&(i=a-this._lastTime),i>0&&i<=1e3&&O(this.pm.data,"view_content_playback_time",i),this._playbackTimeTrackerLastPlayheadPosition=t,this._lastTime=a}}]),r}(),Ht=bi;var wi=function(){"use strict";function r(e){S(this,r),d(this,"pm",void 0),this.pm=e;var t=this._updatePlayheadTime.bind(this);e.on("playbackheartbeat",t),e.on("playbackheartbeatend",t),e.on("timeupdate",t),e.on("destroy",function(){e.off("timeupdate",t)})}return M(r,[{key:"_updateMaxPlayheadPosition",value:function(){this.pm.data.view_max_playhead_position=typeof this.pm.data.view_max_playhead_position=="undefined"?this.pm.data.player_playhead_time:Math.max(this.pm.data.view_max_playhead_position,this.pm.data.player_playhead_time)}},{key:"_updatePlayheadTime",value:function(t,a){var i=this,n=function(){i.pm.currentFragmentPDT&&i.pm.currentFragmentStart&&(i.pm.data.player_program_time=i.pm.currentFragmentPDT+i.pm.data.player_playhead_time-i.pm.currentFragmentStart)};if(a&&a.player_playhead_time)this.pm.data.player_playhead_time=a.player_playhead_time,n(),this._updateMaxPlayheadPosition();else if(this.pm.getPlayheadTime){var o=this.pm.getPlayheadTime();typeof o!="undefined"&&(this.pm.data.player_playhead_time=o,n(),this._updateMaxPlayheadPosition())}}}]),r}(),Bt=wi;var Ut=5*60*1e3,Ti=function r(e){"use strict";if(S(this,r),!e.disableRebufferTracking){var t,a=function(n,o){i(o),t=void 0},i=function(n){if(t){var o=n.viewer_time-t;O(e.data,"view_rebuffer_duration",o),t=n.viewer_time,e.data.view_rebuffer_duration>Ut&&(e.emit("viewend"),e.send("viewend"),e.mux.log.warn("Ending view after rebuffering for longer than ".concat(Ut,"ms, future events will be ignored unless a programchange or videochange occurs.")))}e.data.view_watch_time>=0&&e.data.view_rebuffer_count>0&&(e.data.view_rebuffer_frequency=e.data.view_rebuffer_count/e.data.view_watch_time,e.data.view_rebuffer_percentage=e.data.view_rebuffer_duration/e.data.view_watch_time)};e.on("playbackheartbeat",function(n,o){return i(o)}),e.on("rebufferstart",function(n,o){t||(O(e.data,"view_rebuffer_count",1),t=o.viewer_time,e.one("rebufferend",a))}),e.on("viewinit",function(){t=void 0,e.off("rebufferend",a)})}},Ft=Ti;var Ei=function(){"use strict";function r(e){var t=this;S(this,r),d(this,"_lastCheckedTime",void 0),d(this,"_lastPlayheadTime",void 0),d(this,"_lastPlayheadTimeUpdatedTime",void 0),d(this,"_rebuffering",void 0),d(this,"pm",void 0),this.pm=e,!(e.disableRebufferTracking||e.disablePlayheadRebufferTracking)&&(this._lastCheckedTime=null,this._lastPlayheadTime=null,this._lastPlayheadTimeUpdatedTime=null,e.on("playbackheartbeat",this._checkIfRebuffering.bind(this)),e.on("playbackheartbeatend",this._cleanupRebufferTracker.bind(this)),e.on("seeking",function(){t._cleanupRebufferTracker(null,{viewer_time:A.now()})}))}return M(r,[{key:"_checkIfRebuffering",value:function(t,a){if(this.pm.seekingTracker.isSeeking||this.pm.adTracker.isAdBreak||!this.pm.playbackHeartbeat._playheadShouldBeProgressing){this._cleanupRebufferTracker(t,a);return}if(this._lastCheckedTime===null){this._prepareRebufferTrackerState(a.viewer_time);return}if(this._lastPlayheadTime!==this.pm.data.player_playhead_time){this._cleanupRebufferTracker(t,a,!0);return}var i=a.viewer_time-this._lastPlayheadTimeUpdatedTime;typeof this.pm.sustainedRebufferThreshold=="number"&&i>=this.pm.sustainedRebufferThreshold&&(this._rebuffering||(this._rebuffering=!0,this.pm.emit("rebufferstart",{viewer_time:this._lastPlayheadTimeUpdatedTime}))),this._lastCheckedTime=a.viewer_time}},{key:"_clearRebufferTrackerState",value:function(){this._lastCheckedTime=null,this._lastPlayheadTime=null,this._lastPlayheadTimeUpdatedTime=null}},{key:"_prepareRebufferTrackerState",value:function(t){this._lastCheckedTime=t,this._lastPlayheadTime=this.pm.data.player_playhead_time,this._lastPlayheadTimeUpdatedTime=t}},{key:"_cleanupRebufferTracker",value:function(t,a){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(this._rebuffering)this._rebuffering=!1,this.pm.emit("rebufferend",{viewer_time:a.viewer_time});else{if(this._lastCheckedTime===null)return;var n=this.pm.data.player_playhead_time-this._lastPlayheadTime,o=a.viewer_time-this._lastPlayheadTimeUpdatedTime;typeof this.pm.minimumRebufferDuration=="number"&&n>0&&o-n>this.pm.minimumRebufferDuration&&(this._lastCheckedTime=null,this.pm.emit("rebufferstart",{viewer_time:this._lastPlayheadTimeUpdatedTime}),this.pm.emit("rebufferend",{viewer_time:this._lastPlayheadTimeUpdatedTime+o-n}))}i?this._prepareRebufferTrackerState(a.viewer_time):this._clearRebufferTrackerState()}}]),r}(),Vt=Ei;var ki=function(){"use strict";function r(e){var t=this;S(this,r),d(this,"NAVIGATION_START",void 0),d(this,"pm",void 0),this.pm=e,e.on("viewinit",function(){var a=e.data,i=a.view_id;if(!a.view_program_changed){var n=function(o,s){var f=s.viewer_time;o.type==="playing"&&typeof e.data.view_time_to_first_frame=="undefined"?t.calculateTimeToFirstFrame(f||A.now(),i):o.type==="adplaying"&&(typeof e.data.view_time_to_first_frame=="undefined"||t._inPrerollPosition())&&t.calculateTimeToFirstFrame(f||A.now(),i)};e.one("playing",n),e.one("adplaying",n),e.one("viewend",function(){e.off("playing",n),e.off("adplaying",n)})}})}return M(r,[{key:"_inPrerollPosition",value:function(){return typeof this.pm.data.view_content_playback_time=="undefined"||this.pm.data.view_content_playback_time<=1e3}},{key:"calculateTimeToFirstFrame",value:function(t,a){a===this.pm.data.view_id&&(this.pm.watchTimeTracker._updateWatchTime(null,{viewer_time:t}),this.pm.data.view_time_to_first_frame=this.pm.data.view_watch_time,(this.pm.data.player_autoplay_on||this.pm.data.video_is_autoplay)&&this.NAVIGATION_START&&(this.pm.data.view_aggregate_startup_time=this.pm.data.view_start+this.pm.data.view_watch_time-this.NAVIGATION_START))}}]),r}(),Wt=ki;var xi=function r(e){"use strict";var t=this;S(this,r),d(this,"_lastPlayerHeight",void 0),d(this,"_lastPlayerWidth",void 0),d(this,"_lastPlayheadPosition",void 0),d(this,"_lastSourceHeight",void 0),d(this,"_lastSourceWidth",void 0),e.on("viewinit",function(){t._lastPlayheadPosition=-1});var a=["pause","rebufferstart","seeking","error","adbreakstart","hb"],i=["playing","hb"];a.forEach(function(n){e.on(n,function(){if(t._lastPlayheadPosition>=0&&e.data.player_playhead_time>=0&&t._lastPlayerWidth>=0&&t._lastSourceWidth>0&&t._lastPlayerHeight>=0&&t._lastSourceHeight>0){var o=e.data.player_playhead_time-t._lastPlayheadPosition;if(o<0){t._lastPlayheadPosition=-1;return}var s=Math.min(t._lastPlayerWidth/t._lastSourceWidth,t._lastPlayerHeight/t._lastSourceHeight),f=Math.max(0,s-1),h=Math.max(0,1-s);e.data.view_max_upscale_percentage=Math.max(e.data.view_max_upscale_percentage||0,f),e.data.view_max_downscale_percentage=Math.max(e.data.view_max_downscale_percentage||0,h),O(e.data,"view_total_content_playback_time",o),O(e.data,"view_total_upscaling",f*o),O(e.data,"view_total_downscaling",h*o)}t._lastPlayheadPosition=-1})}),i.forEach(function(n){e.on(n,function(){t._lastPlayheadPosition=e.data.player_playhead_time,t._lastPlayerWidth=e.data.player_width,t._lastPlayerHeight=e.data.player_height,t._lastSourceWidth=e.data.video_source_width,t._lastSourceHeight=e.data.video_source_height})})},jt=xi;var Di=2e3,Si=function r(e){"use strict";var t=this;S(this,r),d(this,"isSeeking",void 0),this.isSeeking=!1;var a=-1,i=function(){var n=A.now(),o=(e.data.viewer_time||n)-(a||n);O(e.data,"view_seek_duration",o),e.data.view_max_seek_time=Math.max(e.data.view_max_seek_time||0,o),t.isSeeking=!1,a=-1};e.on("seeking",function(n,o){if(Object.assign(e.data,o),t.isSeeking&&o.viewer_time-a<=Di){a=o.viewer_time;return}t.isSeeking&&i(),t.isSeeking=!0,a=o.viewer_time,O(e.data,"view_seek_count",1),e.send("seeking")}),e.on("seeked",function(){i()}),e.on("viewend",function(){t.isSeeking&&(i(),e.send("seeked")),t.isSeeking=!1,a=-1})},Gt=Si;var Jt=function(e,t){e.push(t),e.sort(function(a,i){return a.viewer_time-i.viewer_time})},Ri=["adbreakstart","adrequest","adresponse","adplay","adplaying","adpause","adended","adbreakend","aderror","adclicked","adskipped"],qi=function(){"use strict";function r(e){var t=this;S(this,r),d(this,"_adHasPlayed",void 0),d(this,"_adRequests",void 0),d(this,"_adResponses",void 0),d(this,"_currentAdRequestNumber",void 0),d(this,"_currentAdResponseNumber",void 0),d(this,"_prerollPlayTime",void 0),d(this,"_wouldBeNewAdPlay",void 0),d(this,"isAdBreak",void 0),d(this,"pm",void 0),this.pm=e,e.on("viewinit",function(){t.isAdBreak=!1,t._currentAdRequestNumber=0,t._currentAdResponseNumber=0,t._adRequests=[],t._adResponses=[],t._adHasPlayed=!1,t._wouldBeNewAdPlay=!0,t._prerollPlayTime=void 0}),Ri.forEach(function(i){return e.on(i,t._updateAdData.bind(t))});var a=function(){t.isAdBreak=!1};e.on("adbreakstart",function(){t.isAdBreak=!0}),e.on("play",a),e.on("playing",a),e.on("viewend",a),e.on("adrequest",function(i,n){n=Object.assign({ad_request_id:"generatedAdRequestId"+t._currentAdRequestNumber++},n),Jt(t._adRequests,n),O(e.data,"view_ad_request_count"),t.inPrerollPosition()&&(e.data.view_preroll_requested=!0,t._adHasPlayed||O(e.data,"view_preroll_request_count"))}),e.on("adresponse",function(i,n){n=Object.assign({ad_request_id:"generatedAdRequestId"+t._currentAdResponseNumber++},n),Jt(t._adResponses,n);var o=t.findAdRequest(n.ad_request_id);o&&O(e.data,"view_ad_request_time",Math.max(0,n.viewer_time-o.viewer_time))}),e.on("adplay",function(i,n){t._adHasPlayed=!0,t._wouldBeNewAdPlay&&(t._wouldBeNewAdPlay=!1,O(e.data,"view_ad_played_count")),t.inPrerollPosition()&&!e.data.view_preroll_played&&(e.data.view_preroll_played=!0,t._adRequests.length>0&&(e.data.view_preroll_request_time=Math.max(0,n.viewer_time-t._adRequests[0].viewer_time)),e.data.view_start&&(e.data.view_startup_preroll_request_time=Math.max(0,n.viewer_time-e.data.view_start)),t._prerollPlayTime=n.viewer_time)}),e.on("adplaying",function(i,n){t.inPrerollPosition()&&typeof e.data.view_preroll_load_time=="undefined"&&typeof t._prerollPlayTime!="undefined"&&(e.data.view_preroll_load_time=n.viewer_time-t._prerollPlayTime,e.data.view_startup_preroll_load_time=n.viewer_time-t._prerollPlayTime)}),e.on("adclicked",function(i,n){t._wouldBeNewAdPlay||O(e.data,"view_ad_clicked_count")}),e.on("adskipped",function(i,n){t._wouldBeNewAdPlay||O(e.data,"view_ad_skipped_count")}),e.on("adended",function(){t._wouldBeNewAdPlay=!0}),e.on("aderror",function(){t._wouldBeNewAdPlay=!0})}return M(r,[{key:"inPrerollPosition",value:function(){return typeof this.pm.data.view_content_playback_time=="undefined"||this.pm.data.view_content_playback_time<=1e3}},{key:"findAdRequest",value:function(t){for(var a=0;a<this._adRequests.length;a++)if(this._adRequests[a].ad_request_id===t)return this._adRequests[a]}},{key:"_updateAdData",value:function(t,a){if(this.inPrerollPosition()){if(!this.pm.data.view_preroll_ad_tag_hostname&&a.ad_tag_url){var i=j(ee(a.ad_tag_url),2),n=i[0],o=i[1];this.pm.data.view_preroll_ad_tag_domain=o,this.pm.data.view_preroll_ad_tag_hostname=n}if(!this.pm.data.view_preroll_ad_asset_hostname&&a.ad_asset_url){var s=j(ee(a.ad_asset_url),2),f=s[0],h=s[1];this.pm.data.view_preroll_ad_asset_domain=h,this.pm.data.view_preroll_ad_asset_hostname=f}}this.pm.data.ad_asset_url=a==null?void 0:a.ad_asset_url,this.pm.data.ad_tag_url=a==null?void 0:a.ad_tag_url,this.pm.data.ad_creative_id=a==null?void 0:a.ad_creative_id,this.pm.data.ad_id=a==null?void 0:a.ad_id,this.pm.data.ad_universal_id=a==null?void 0:a.ad_universal_id}}]),r}(),Qt=qi;var Ge=B(J());var Ai=function r(e){"use strict";S(this,r);var t,a,i=function(){e.disableRebufferTracking||(O(e.data,"view_waiting_rebuffer_count",1),t=A.now(),a=Ge.default.setInterval(function(){if(t){var h=A.now();O(e.data,"view_waiting_rebuffer_duration",h-t),t=h}},250))},n=function(){e.disableRebufferTracking||t&&(O(e.data,"view_waiting_rebuffer_duration",A.now()-t),t=!1,Ge.default.clearInterval(a))},o=!1,s=function(){o=!0},f=function(){o=!1,n()};e.on("waiting",function(){o&&i()}),e.on("playing",function(){n(),s()}),e.on("pause",f),e.on("seeking",f)},zt=Ai;var Oi=function r(e){"use strict";var t=this;S(this,r),d(this,"lastWallClockTime",void 0);var a=function(){t.lastWallClockTime=A.now(),e.on("before*",i)},i=function(n){var o=A.now(),s=t.lastWallClockTime;t.lastWallClockTime=o,o-s>3e4&&(e.emit("devicesleep",{viewer_time:s}),Object.assign(e.data,{viewer_time:s}),e.send("devicesleep"),e.emit("devicewake",{viewer_time:o}),Object.assign(e.data,{viewer_time:o}),e.send("devicewake"))};e.one("playbackheartbeat",a),e.on("playbackheartbeatend",function(){e.off("before*",i),e.one("playbackheartbeat",a)})},Kt=Oi;var He=B(J());var Qe=B($t()),ze=B(tr());var rr="muxData",ir=function(){var e;try{e=Qe.default.parse(ze.default.get(rr)||"")}catch(t){e={}}return e},ar=function(e){try{ze.default.set(rr,Qe.default.stringify(e),{expires:365})}catch(t){}},nr=function(){var e=ir();return e.mux_viewer_id=e.mux_viewer_id||X(),e.msn=e.msn||Math.random(),ar(e),{mux_viewer_id:e.mux_viewer_id,mux_sample_number:e.msn}},or=function(){var e=ir(),t=A.now();return e.session_start&&(e.sst=e.session_start,delete e.session_start),e.session_id&&(e.sid=e.session_id,delete e.session_id),e.session_expires&&(e.sex=e.session_expires,delete e.session_expires),(!e.sex||e.sex<t)&&(e.sid=X(),e.sst=t),e.sex=t+25*60*1e3,ar(e),{session_id:e.sid,session_start:e.sst,session_expires:e.sex}};function Ke(r,e){var t=e.beaconCollectionDomain,a=e.beaconDomain;if(t)return"https://"+t;r=r||"inferred";var i=a||"litix.io";return r.match(/^[a-z0-9]+$/)?"https://"+r+"."+i:"https://img.litix.io/a.gif"}var sr=B(J()),ur=function(){var e;switch(dr()){case"cellular":e="cellular";break;case"ethernet":e="wired";break;case"wifi":e="wifi";break;case void 0:break;default:e="other"}return e},dr=function(){var e=sr.default.navigator,t=e&&(e.connection||e.mozConnection||e.webkitConnection);return t&&t.type};ur.getConnectionFromAPI=dr;var lr=ur;var Ci={a:"env",b:"beacon",c:"custom",d:"ad",e:"event",f:"experiment",i:"internal",m:"mux",n:"response",p:"player",q:"request",r:"retry",s:"session",t:"timestamp",u:"viewer",v:"video",w:"page",x:"view",y:"sub"},Mi=fr(Ci),Hi={ad:"ad",ag:"aggregate",ap:"api",al:"application",ar:"architecture",as:"asset",au:"autoplay",av:"average",bi:"bitrate",br:"break",bw:"browser",by:"bytes",bz:"business",ca:"cached",cb:"cancel",cc:"codec",cd:"code",cg:"category",ch:"changed",ck:"clicked",cl:"canceled",cn:"config",co:"count",ce:"counter",cp:"complete",cr:"creative",ct:"content",cu:"current",cx:"connection",cz:"context",dg:"downscaling",dm:"domain",dn:"cdn",do:"downscale",dr:"drm",dp:"dropped",du:"duration",dv:"device",ec:"encoding",ed:"edge",en:"end",eg:"engine",em:"embed",er:"error",ep:"experiments",es:"errorcode",et:"errortext",ee:"event",ev:"events",ex:"expires",ez:"exception",fa:"failed",fi:"first",fm:"family",ft:"format",fp:"fps",fq:"frequency",fr:"frame",fs:"fullscreen",ha:"has",hb:"holdback",he:"headers",ho:"host",hn:"hostname",ht:"height",id:"id",ii:"init",in:"instance",ip:"ip",is:"is",ke:"key",la:"language",lb:"labeled",le:"level",li:"live",ld:"loaded",lo:"load",ls:"lists",lt:"latency",ma:"max",md:"media",me:"message",mf:"manifest",mi:"mime",ml:"midroll",mm:"min",mn:"manufacturer",mo:"model",mx:"mux",ne:"newest",nm:"name",no:"number",on:"on",os:"os",pa:"paused",pb:"playback",pd:"producer",pe:"percentage",pf:"played",pg:"program",ph:"playhead",pi:"plugin",pl:"preroll",pn:"playing",po:"poster",pr:"preload",ps:"position",pt:"part",py:"property",ra:"rate",rd:"requested",re:"rebuffer",rf:"rendition",rm:"remote",ro:"ratio",rp:"response",rq:"request",rs:"requests",sa:"sample",sd:"skipped",se:"session",sk:"seek",sm:"stream",so:"source",sq:"sequence",sr:"series",st:"start",su:"startup",sv:"server",sw:"software",sy:"severity",ta:"tag",tc:"tech",te:"text",tg:"target",th:"throughput",ti:"time",tl:"total",to:"to",tt:"title",ty:"type",ug:"upscaling",un:"universal",up:"upscale",ur:"url",us:"user",va:"variant",vd:"viewed",vi:"video",ve:"version",vw:"view",vr:"viewer",wd:"width",wa:"watch",wt:"waiting"},cr=fr(Hi);function fr(r){var e={};for(var t in r)r.hasOwnProperty(t)&&(e[r[t]]=t);return e}function _e(r){var e={},t={};return Object.keys(r).forEach(function(a){var i=!1;if(r.hasOwnProperty(a)&&r[a]!==void 0){var n=a.split("_"),o=n[0],s=Mi[o];s||(I.info("Data key word `"+n[0]+"` not expected in "+a),s=o+"_"),n.splice(1).forEach(function(f){f==="url"&&(i=!0),cr[f]?s+=cr[f]:Number(f)&&Math.floor(Number(f))===Number(f)?s+=f:(I.info("Data key word `"+f+"` not expected in "+a),s+="_"+f+"_")}),i?t[s]=r[a]:e[s]=r[a]}}),Object.assign(e,t)}var te=B(J());var Bi={maxBeaconSize:300,maxQueueLength:3600,baseTimeBetweenBeacons:1e4,maxPayloadKBSize:500},Ui=56*1024,Fi=["hb","requestcompleted","requestfailed","requestcanceled"],Vi="https://img.litix.io",K=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this._beaconUrl=e||Vi,this._eventQueue=[],this._postInFlight=!1,this._failureCount=0,this._sendTimeout=!1,this._options=Object.assign({},Bi,t)};K.prototype.queueEvent=function(r,e){var t=Object.assign({},e);return this._eventQueue.length<=this._options.maxQueueLength||r==="eventrateexceeded"?(this._eventQueue.push(t),this._sendTimeout||this._startBeaconSending(),this._eventQueue.length<=this._options.maxQueueLength):!1};K.prototype.flushEvents=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(r&&this._eventQueue.length===1){this._eventQueue.pop();return}this._eventQueue.length&&this._sendBeaconQueue(),this._startBeaconSending()};K.prototype.destroy=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this.destroyed=!0,r?this._clearBeaconQueue():this.flushEvents(),te.default.clearTimeout(this._sendTimeout)};K.prototype._clearBeaconQueue=function(){var r=this._eventQueue.length>this._options.maxBeaconSize?this._eventQueue.length-this._options.maxBeaconSize:0,e=this._eventQueue.slice(r);r>0&&Object.assign(e[e.length-1],_e({mux_view_message:"event queue truncated"}));var t=this._createPayload(e);_r(this._beaconUrl,t,!0,function(){})};K.prototype._sendBeaconQueue=function(){var r=this;if(!this._postInFlight){var e=this._eventQueue.slice(0,this._options.maxBeaconSize);this._eventQueue=this._eventQueue.slice(this._options.maxBeaconSize),this._postInFlight=!0;var t=this._createPayload(e),a=A.now();_r(this._beaconUrl,t,!1,function(i,n){n?(r._eventQueue=e.concat(r._eventQueue),r._failureCount+=1,I.info("Error sending beacon: "+n)):r._failureCount=0,r._roundTripTime=A.now()-a,r._postInFlight=!1})}};K.prototype._getNextBeaconTime=function(){if(!this._failureCount)return this._options.baseTimeBetweenBeacons;var r=Math.pow(2,this._failureCount-1);return r=r*Math.random(),(1+r)*this._options.baseTimeBetweenBeacons};K.prototype._startBeaconSending=function(){var r=this;te.default.clearTimeout(this._sendTimeout),!this.destroyed&&(this._sendTimeout=te.default.setTimeout(function(){r._eventQueue.length&&r._sendBeaconQueue(),r._startBeaconSending()},this._getNextBeaconTime()))};K.prototype._createPayload=function(r){var e=this,t={transmission_timestamp:Math.round(A.now())};this._roundTripTime&&(t.rtt_ms=Math.round(this._roundTripTime));var a,i,n,o=function(){a=JSON.stringify({metadata:t,events:i||r}),n=a.length/1024},s=function(){return n<=e._options.maxPayloadKBSize};return o(),s()||(I.info("Payload size is too big ("+n+" kb). Removing unnecessary events."),i=r.filter(function(f){return Fi.indexOf(f.e)===-1}),o()),s()||(I.info("Payload size still too big ("+n+" kb). Cropping fields.."),i.forEach(function(f){for(var h in f){var T=f[h],g=50*1024;typeof T=="string"&&T.length>g&&(f[h]=T.substring(0,g))}}),o()),a};var Wi=function(r){return r.length<=Ui},_r=function(r,e,t,a){if(t&&navigator&&navigator.sendBeacon&&navigator.sendBeacon(r,e)){a();return}if(te.default.fetch){te.default.fetch(r,{method:"POST",body:e,headers:{"Content-Type":"text/plain"},keepalive:Wi(e)}).then(function(n){return a(null,n.ok?null:"Error")}).catch(function(n){return a(null,n)});return}if(te.default.XMLHttpRequest){var i=new te.default.XMLHttpRequest;i.onreadystatechange=function(){if(i.readyState===4)return a(null,i.status!==200?"error":void 0)},i.open("POST",r),i.setRequestHeader("Content-Type","text/plain"),i.send(e);return}a()},pr=K;var ji=["env_key","view_id","view_sequence_number","player_sequence_number","beacon_domain","player_playhead_time","viewer_time","mux_api_version","event","video_id","player_instance_id","player_error_code","player_error_message","player_error_context","player_error_severity","player_error_business_exception"],Gi=["adplay","adplaying","adpause","adfirstquartile","admidpoint","adthirdquartile","adended","adresponse","adrequest"],Ji=["ad_id","ad_creative_id","ad_universal_id"],Qi=["viewstart","error","ended","viewend"],zi=10*60*1e3,vr=function(){"use strict";function r(e,t){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};S(this,r);var i,n,o,s,f,h,T,g,x,v,l,w;d(this,"mux",void 0),d(this,"envKey",void 0),d(this,"options",void 0),d(this,"eventQueue",void 0),d(this,"sampleRate",void 0),d(this,"disableCookies",void 0),d(this,"respectDoNotTrack",void 0),d(this,"previousBeaconData",void 0),d(this,"lastEventTime",void 0),d(this,"rateLimited",void 0),d(this,"pageLevelData",void 0),d(this,"viewerData",void 0),this.mux=e,this.envKey=t,this.options=a,this.previousBeaconData=null,this.lastEventTime=0,this.rateLimited=!1,this.eventQueue=new pr(Ke(this.envKey,this.options));var D;this.sampleRate=(D=this.options.sampleRate)!==null&&D!==void 0?D:1;var p;this.disableCookies=(p=this.options.disableCookies)!==null&&p!==void 0?p:!1;var _;this.respectDoNotTrack=(_=this.options.respectDoNotTrack)!==null&&_!==void 0?_:!1,this.previousBeaconData=null,this.lastEventTime=0,this.rateLimited=!1,this.pageLevelData={mux_api_version:this.mux.API_VERSION,mux_embed:this.mux.NAME,mux_embed_version:this.mux.VERSION,viewer_application_name:(i=this.options.platform)===null||i===void 0?void 0:i.name,viewer_application_version:(n=this.options.platform)===null||n===void 0?void 0:n.version,viewer_application_engine:(o=this.options.platform)===null||o===void 0?void 0:o.layout,viewer_device_name:(s=this.options.platform)===null||s===void 0?void 0:s.product,viewer_device_category:"",viewer_device_manufacturer:(f=this.options.platform)===null||f===void 0?void 0:f.manufacturer,viewer_os_family:(T=this.options.platform)===null||T===void 0||(h=T.os)===null||h===void 0?void 0:h.family,viewer_os_architecture:(x=this.options.platform)===null||x===void 0||(g=x.os)===null||g===void 0?void 0:g.architecture,viewer_os_version:(l=this.options.platform)===null||l===void 0||(v=l.os)===null||v===void 0?void 0:v.version,viewer_connection_type:lr(),page_url:He.default===null||He.default===void 0||(w=He.default.location)===null||w===void 0?void 0:w.href},this.viewerData=this.disableCookies?{}:nr()}return M(r,[{key:"send",value:function(t,a){if(!(!t||!(a!=null&&a.view_id))){if(this.respectDoNotTrack&&de())return I.info("Not sending `"+t+"` because Do Not Track is enabled");if(!a||typeof a!="object")return I.error("A data object was expected in send() but was not provided");var i=this.disableCookies?{}:or(),n=ce(ne({},this.pageLevelData,a,i,this.viewerData),{event:t,env_key:this.envKey});n.user_id&&(n.viewer_user_id=n.user_id,delete n.user_id);var o,s=((o=n.mux_sample_number)!==null&&o!==void 0?o:0)>=this.sampleRate,f=this._deduplicateBeaconData(t,n),h=_e(f);if(this.lastEventTime=this.mux.utils.now(),s)return I.info("Not sending event due to sample rate restriction",t,n,h);if(this.envKey||I.info("Missing environment key (envKey) - beacons will be dropped if the video source is not a valid mux video URL",t,n,h),!this.rateLimited){if(I.info("Sending event",t,n,h),this.rateLimited=!this.eventQueue.queueEvent(t,h),this.mux.WINDOW_UNLOADING&&t==="viewend")this.eventQueue.destroy(!0);else if(this.mux.WINDOW_HIDDEN&&t==="hb"?this.eventQueue.flushEvents(!0):Qi.indexOf(t)>=0&&this.eventQueue.flushEvents(),this.rateLimited)return n.event="eventrateexceeded",h=_e(n),this.eventQueue.queueEvent(n.event,h),I.error("Beaconing disabled due to rate limit.")}}}},{key:"destroy",value:function(){this.eventQueue.destroy(!1)}},{key:"_deduplicateBeaconData",value:function(t,a){var i=this,n={},o=a.view_id;if(o==="-1"||t==="viewstart"||t==="viewend"||!this.previousBeaconData||this.mux.utils.now()-this.lastEventTime>=zi)n=ne({},a),o&&(this.previousBeaconData=n),o&&t==="viewend"&&(this.previousBeaconData=null);else{var s=t.indexOf("request")===0;Object.entries(a).forEach(function(f){var h=j(f,2),T=h[0],g=h[1];i.previousBeaconData&&(g!==i.previousBeaconData[T]||ji.indexOf(T)>-1||i.objectHasChanged(s,T,g,i.previousBeaconData[T])||i.eventRequiresKey(t,T))&&(n[T]=g,i.previousBeaconData[T]=g)})}return n}},{key:"objectHasChanged",value:function(t,a,i,n){return!t||a.indexOf("request_")!==0?!1:a==="request_response_headers"||typeof i!="object"||typeof n!="object"?!0:Object.keys(i||{}).length!==Object.keys(n||{}).length}},{key:"eventRequiresKey",value:function(t,a){return!!(t==="renditionchange"&&a.indexOf("video_source_")===0||Ji.includes(a)&&Gi.includes(t))}}]),r}();var Ki=function r(e){"use strict";S(this,r);var t=0,a=0,i=0,n=0,o=0,s=0,f=0,h=function(x,v){var l=v.request_start,w=v.request_response_start,D=v.request_response_end,p=v.request_bytes_loaded;n++;var _,c;if(w?(_=w-(l!=null?l:0),c=(D!=null?D:0)-w):c=(D!=null?D:0)-(l!=null?l:0),c>0&&p&&p>0){var u=p/c*8e3;o++,a+=p,i+=c,e.data.view_min_request_throughput=Math.min(e.data.view_min_request_throughput||1/0,u),e.data.view_average_request_throughput=a/i*8e3,e.data.view_request_count=n,_>0&&(t+=_,e.data.view_max_request_latency=Math.max(e.data.view_max_request_latency||0,_),e.data.view_average_request_latency=t/o)}},T=function(x,v){n++,s++,e.data.view_request_count=n,e.data.view_request_failed_count=s},g=function(x,v){n++,f++,e.data.view_request_count=n,e.data.view_request_canceled_count=f};e.on("requestcompleted",h),e.on("requestfailed",T),e.on("requestcanceled",g)},mr=Ki;var Yi=60*60*1e3,Xi=function r(e){"use strict";var t=this;S(this,r),d(this,"_lastEventTime",void 0),e.on("before*",function(a,i){var n=i.viewer_time,o=A.now(),s=t._lastEventTime;if(t._lastEventTime=o,s&&o-s>Yi){var f=Object.keys(e.data).reduce(function(h,T){return T.indexOf("video_")===0?Object.assign(h,d({},T,e.data[T])):h},{});e.mux.log.info("Received event after at least an hour inactivity, creating a new view"),e.emit("viewinit",Object.assign({viewer_time:n},f)),e.playbackHeartbeat._playheadShouldBeProgressing&&a.type!=="play"&&a.type!=="adbreakstart"&&(e.emit("play",{viewer_time:n}),a.type!=="playing"&&e.emit("playing",{viewer_time:n}))}})},hr=Xi;var $i=["viewstart","ended","loadstart","pause","play","playing","ratechange","waiting","adplay","adpause","adended","aderror","adplaying","adrequest","adresponse","adbreakstart","adbreakend","adfirstquartile","admidpoint","adthirdquartile","rebufferstart","rebufferend","seeked","error","hb","requestcompleted","requestfailed","requestcanceled","renditionchange"],Zi=function(r){"use strict";Et(t,r);var e=Dt(t);function t(a,i,n){S(this,t);var o;o=e.call(this),d(b(o),"DOM_CONTENT_LOADED_EVENT_END",void 0),d(b(o),"NAVIGATION_START",void 0),d(b(o),"_destroyed",void 0),d(b(o),"_heartBeatTimeout",void 0),d(b(o),"adTracker",void 0),d(b(o),"dashjs",void 0),d(b(o),"data",void 0),d(b(o),"disablePlayheadRebufferTracking",void 0),d(b(o),"disableRebufferTracking",void 0),d(b(o),"errorTracker",void 0),d(b(o),"errorTranslator",void 0),d(b(o),"getAdData",void 0),d(b(o),"getPlayheadTime",void 0),d(b(o),"getStateData",void 0),d(b(o),"hlsjs",void 0),d(b(o),"id",void 0),d(b(o),"longResumeTracker",void 0),d(b(o),"minimumRebufferDuration",void 0),d(b(o),"mux",void 0),d(b(o),"oldEmit",void 0),d(b(o),"playbackEventDispatcher",void 0),d(b(o),"playbackHeartbeat",void 0),d(b(o),"playbackHeartbeatTime",void 0),d(b(o),"playheadTime",void 0),d(b(o),"seekingTracker",void 0),d(b(o),"sustainedRebufferThreshold",void 0),d(b(o),"watchTimeTracker",void 0),d(b(o),"currentFragmentPDT",void 0),d(b(o),"currentFragmentStart",void 0),o.DOM_CONTENT_LOADED_EVENT_END=le.domContentLoadedEventEnd(),o.NAVIGATION_START=le.navigationStart();var s={debug:!1,minimumRebufferDuration:250,sustainedRebufferThreshold:1e3,playbackHeartbeatTime:25,beaconDomain:"litix.io",sampleRate:1,disableCookies:!1,respectDoNotTrack:!1,disableRebufferTracking:!1,disablePlayheadRebufferTracking:!1,errorTranslator:function(v){return v}};o.mux=a,o.id=i,n!=null&&n.beaconDomain&&o.mux.log.warn("The `beaconDomain` setting has been deprecated in favor of `beaconCollectionDomain`. Please change your integration to use `beaconCollectionDomain` instead of `beaconDomain`."),n=Object.assign(s,n),n.data=n.data||{},n.data.property_key&&(n.data.env_key=n.data.property_key,delete n.data.property_key),I.setLevel(n.debug?"debug":"warn"),o.getPlayheadTime=n.getPlayheadTime,o.getStateData=n.getStateData||function(){return{}},o.getAdData=n.getAdData||function(){},o.minimumRebufferDuration=n.minimumRebufferDuration,o.sustainedRebufferThreshold=n.sustainedRebufferThreshold,o.playbackHeartbeatTime=n.playbackHeartbeatTime,o.disableRebufferTracking=n.disableRebufferTracking,o.disableRebufferTracking&&o.mux.log.warn("Disabling rebuffer tracking. This should only be used in specific circumstances as a last resort when your player is known to unreliably track rebuffering."),o.disablePlayheadRebufferTracking=n.disablePlayheadRebufferTracking,o.errorTranslator=n.errorTranslator,o.playbackEventDispatcher=new vr(a,n.data.env_key,n),o.data={player_instance_id:X(),mux_sample_rate:n.sampleRate,beacon_domain:n.beaconCollectionDomain||n.beaconDomain},o.data.view_sequence_number=1,o.data.player_sequence_number=1,o.oldEmit=o.emit,o.emit=function(v,l){l=Object.assign({viewer_time:this.mux.utils.now()},l),this.oldEmit(v,l)};var f=function(){typeof this.data.view_start=="undefined"&&(this.data.view_start=this.mux.utils.now(),this.emit("viewstart"))}.bind(b(o));o.on("viewinit",function(v,l){this._resetVideoData(),this._resetViewData(),this._resetErrorData(),this._updateStateData(),Object.assign(this.data,l),this._initializeViewData(),this.one("play",f),this.one("adbreakstart",f)});var h=function(v){this.emit("viewend"),this.send("viewend"),this.emit("viewinit",v)}.bind(b(o));if(o.on("videochange",function(v,l){h(l)}),o.on("programchange",function(v,l){this.data.player_is_paused&&this.mux.log.warn("The `programchange` event is intended to be used when the content changes mid playback without the video source changing, however the video is not currently playing. If the video source is changing please use the videochange event otherwise you will lose startup time information."),h(Object.assign(l,{view_program_changed:!0})),f(),this.emit("play"),this.emit("playing")}),o.on("fragmentchange",function(v,l){this.currentFragmentPDT=l.currentFragmentPDT,this.currentFragmentStart=l.currentFragmentStart}),o.on("destroy",o.destroy),typeof window!="undefined"&&typeof window.addEventListener=="function"&&typeof window.removeEventListener=="function"){var T=function(){var v=typeof o.data.view_start!="undefined";o.mux.WINDOW_HIDDEN=document.visibilityState==="hidden",v&&o.mux.WINDOW_HIDDEN&&(o.data.player_is_paused||o.emit("hb"))};window.addEventListener("visibilitychange",T,!1);var g=function(v){v.persisted||o.destroy()};window.addEventListener("pagehide",g,!1),o.on("destroy",function(){window.removeEventListener("visibilitychange",T),window.removeEventListener("pagehide",g)})}o.on("playerready",function(v,l){Object.assign(this.data,l)}),$i.forEach(function(v){o.on(v,function(l,w){v.indexOf("ad")!==0&&this._updateStateData(),Object.assign(this.data,w),this._sanitizeData()}),o.on("after"+v,function(){(v!=="error"||this.errorTracker.viewErrored)&&this.send(v)})}),o.on("viewend",function(v,l){Object.assign(o.data,l)});var x=function(l){var w=this.mux.utils.now();this.data.player_init_time&&(this.data.player_startup_time=w-this.data.player_init_time),!this.mux.PLAYER_TRACKED&&this.NAVIGATION_START&&(this.mux.PLAYER_TRACKED=!0,(this.data.player_init_time||this.DOM_CONTENT_LOADED_EVENT_END)&&(this.data.page_load_time=Math.min(this.data.player_init_time||1/0,this.DOM_CONTENT_LOADED_EVENT_END||1/0)-this.NAVIGATION_START)),this.send("playerready"),delete this.data.player_startup_time,delete this.data.page_load_time};return o.one("playerready",x),o.longResumeTracker=new hr(b(o)),o.errorTracker=new Ct(b(o)),new Kt(b(o)),o.seekingTracker=new Gt(b(o)),o.playheadTime=new Bt(b(o)),o.playbackHeartbeat=new Pt(b(o)),new jt(b(o)),o.watchTimeTracker=new Mt(b(o)),new Ht(b(o)),o.adTracker=new Qt(b(o)),new Vt(b(o)),new Ft(b(o)),new Wt(b(o)),new zt(b(o)),new mr(b(o)),n.hlsjs&&o.addHLSJS(n),n.dashjs&&o.addDashJS(n),o.emit("viewinit",n.data),o}return M(t,[{key:"destroy",value:function(){this._destroyed||(this._destroyed=!0,typeof this.data.view_start!="undefined"&&(this.emit("viewend"),this.send("viewend")),this.playbackEventDispatcher.destroy(),this.removeHLSJS(),this.removeDashJS(),window.clearTimeout(this._heartBeatTimeout))}},{key:"send",value:function(i){if(this.data.view_id){var n=Object.assign({},this.data),o=["player_program_time","player_manifest_newest_program_time","player_live_edge_program_time","player_program_time","video_holdback","video_part_holdback","video_target_duration","video_part_target_duration"];if(n.video_source_is_live===void 0&&(n.player_source_duration===1/0||n.video_source_duration===1/0?n.video_source_is_live=!0:(n.player_source_duration>0||n.video_source_duration>0)&&(n.video_source_is_live=!1)),n.video_source_is_live||o.forEach(function(T){n[T]=void 0}),n.video_source_url=n.video_source_url||n.player_source_url,n.video_source_url){var s=j(ee(n.video_source_url),2),f=s[0],h=s[1];n.video_source_domain=h,n.video_source_hostname=f}delete n.ad_request_id,this.playbackEventDispatcher.send(i,n),this.data.view_sequence_number++,this.data.player_sequence_number++,this._restartHeartBeat(),i==="viewend"&&delete this.data.view_id}}},{key:"_updateStateData",value:function(){Object.assign(this.data,this.getStateData()),this.playheadTime._updatePlayheadTime(),this._sanitizeData()}},{key:"_sanitizeData",value:function(){var i=this,n=["player_width","player_height","video_source_width","video_source_height","player_playhead_time","video_source_bitrate"];n.forEach(function(s){var f=parseInt(i.data[s],10);i.data[s]=isNaN(f)?void 0:f});var o=["player_source_url","video_source_url"];o.forEach(function(s){if(i.data[s]){var f=i.data[s].toLowerCase();(f.indexOf("data:")===0||f.indexOf("blob:")===0)&&(i.data[s]="MSE style URL")}})}},{key:"_resetVideoData",value:function(){var i=this;Object.keys(this.data).forEach(function(n){n.indexOf("video_")===0&&delete i.data[n]})}},{key:"_resetViewData",value:function(){var i=this;Object.keys(this.data).forEach(function(n){n.indexOf("view_")===0&&delete i.data[n]}),this.data.view_sequence_number=1}},{key:"_resetErrorData",value:function(){delete this.data.player_error_code,delete this.data.player_error_message,delete this.data.player_error_context,delete this.data.player_error_severity,delete this.data.player_error_business_exception}},{key:"_initializeViewData",value:function(){var i=this,n=this.data.view_id=X(),o=function(){n===i.data.view_id&&O(i.data,"player_view_count",1)};this.data.player_is_paused?this.one("play",o):o()}},{key:"_restartHeartBeat",value:function(){var i=this;window.clearTimeout(this._heartBeatTimeout),this._heartBeatTimeout=window.setTimeout(function(){i.data.player_is_paused||i.emit("hb")},1e4)}},{key:"addHLSJS",value:function(i){if(!i.hlsjs){this.mux.log.warn("You must pass a valid hlsjs instance in order to track it.");return}if(this.hlsjs){this.mux.log.warn("An instance of HLS.js is already being monitored for this player.");return}this.hlsjs=i.hlsjs,Rt(this.mux,this.id,i.hlsjs,{},i.Hls||window.Hls)}},{key:"removeHLSJS",value:function(){this.hlsjs&&(qt(this.hlsjs),this.hlsjs=void 0)}},{key:"addDashJS",value:function(i){if(!i.dashjs){this.mux.log.warn("You must pass a valid dashjs instance in order to track it.");return}if(this.dashjs){this.mux.log.warn("An instance of Dash.js is already being monitored for this player.");return}this.dashjs=i.dashjs,Ot(this.mux,this.id,i.dashjs)}},{key:"removeDashJS",value:function(){this.dashjs&&(It(this.dashjs),this.dashjs=void 0)}}]),t}(Nt),yr=Zi;ke();var ve=B(jr());function nt(){return ve.default&&!!(ve.default.fullscreenElement||ve.default.webkitFullscreenElement||ve.default.mozFullScreenElement||ve.default.msFullscreenElement)}var xa=["loadstart","pause","play","playing","seeking","seeked","timeupdate","ratechange","stalled","waiting","error","ended"],Da={1:"MEDIA_ERR_ABORTED",2:"MEDIA_ERR_NETWORK",3:"MEDIA_ERR_DECODE",4:"MEDIA_ERR_SRC_NOT_SUPPORTED"};function ot(r,e,t){var a=j(Ee(e),3),i=a[0],n=a[1],o=a[2],s=r.log,f=r.utils.getComputedStyle,h=r.utils.secondsToMs,T={automaticErrorTracking:!0};if(i){if(o!=="video"&&o!=="audio")return s.error("The element of `"+n+"` was not a media element.")}else return s.error("No element was found with the `"+n+"` query selector.");i.mux&&(i.mux.destroy(),delete i.mux,s.warn("Already monitoring this video element, replacing existing event listeners")),t=Object.assign(T,t),t.data=Object.assign({player_software:"HTML5 Video Element",player_mux_plugin_name:"VideoElementMonitor",player_mux_plugin_version:r.VERSION},t.data),t.getPlayheadTime=function(){return h(i.currentTime)},t.getStateData=function(){var x,v=this.hlsjs&&this.hlsjs.url,l=this.dashjs&&C(this.dashjs.getSource==="function")&&this.dashjs.getSource(),w={player_is_paused:i.paused,player_playhead_time:h(i.currentTime),player_width:parseInt(f(i,"width")),player_height:parseInt(f(i,"height")),player_autoplay_on:i.autoplay,player_preload_on:i.preload,player_language_code:i.lang,player_is_fullscreen:nt(),video_poster_url:i.poster,video_source_url:v||l||i.currentSrc,video_source_duration:h(i.duration),video_source_height:i.videoHeight,video_source_width:i.videoWidth,view_dropped_frame_count:i==null||(x=i.getVideoPlaybackQuality)===null||x===void 0?void 0:x.call(i).droppedVideoFrames},D=t.getPlayheadTime();if(i.getStartDate&&D>0){var p=i.getStartDate();if(p&&typeof p.getTime=="function"&&p.getTime()){var _=p.getTime();if(w.player_program_time=_+D,i.seekable.length>0){var c=_+i.seekable.end(i.seekable.length-1);w.player_live_edge_program_time=c}}}return w},i.mux=i.mux||{},i.mux.deleted=!1,i.mux.emit=function(x,v){r.emit(n,x,v)};var g=function(){s.error("The monitor for this video element has already been destroyed.")};i.mux.destroy=function(){Object.keys(i.mux.listeners).forEach(function(x){i.removeEventListener(x,i.mux.listeners[x],!1)}),delete i.mux.listeners,i.mux.destroy=g,i.mux.swapElement=g,i.mux.emit=g,i.mux.addHLSJS=g,i.mux.addDashJS=g,i.mux.removeHLSJS=g,i.mux.removeDashJS=g,i.mux.deleted=!0,r.emit(n,"destroy")},i.mux.swapElement=function(x){var v=j(Ee(x),3),l=v[0],w=v[1],D=v[2];if(l){if(D!=="video"&&D!=="audio")return r.log.error("The element of `"+w+"` was not a media element.")}else return r.log.error("No element was found with the `"+w+"` query selector.");l.muxId=i.muxId,delete i.muxId,l.mux=l.mux||{},l.mux.listeners=Object.assign({},i.mux.listeners),delete i.mux.listeners,Object.keys(l.mux.listeners).forEach(function(p){i.removeEventListener(p,l.mux.listeners[p],!1),l.addEventListener(p,l.mux.listeners[p],!1)}),l.mux.swapElement=i.mux.swapElement,l.mux.destroy=i.mux.destroy,delete i.mux,i=l},i.mux.addHLSJS=function(x){r.addHLSJS(n,x)},i.mux.addDashJS=function(x){r.addDashJS(n,x)},i.mux.removeHLSJS=function(){r.removeHLSJS(n)},i.mux.removeDashJS=function(){r.removeDashJS(n)},r.init(n,t),r.emit(n,"playerready"),i.paused||(r.emit(n,"play"),i.readyState>2&&r.emit(n,"playing")),i.mux.listeners={},xa.forEach(function(x){x==="error"&&!t.automaticErrorTracking||(i.mux.listeners[x]=function(){var v={};if(x==="error"){if(!i.error||i.error.code===1)return;v.player_error_code=i.error.code,v.player_error_message=Da[i.error.code]||i.error.message}r.emit(n,x,v)},i.addEventListener(x,i.mux.listeners[x],!1))})}function st(r,e,t,a){var i=a;if(r&&typeof r[e]=="function")try{i=r[e].apply(r,t)}catch(n){I.info("safeCall error",n)}return i}var he=B(J()),me;he.default&&he.default.WeakMap&&(me=new WeakMap);function ut(r,e){if(!r||!e||!he.default||typeof he.default.getComputedStyle!="function")return"";var t;return me&&me.has(r)&&(t=me.get(r)),t||(t=he.default.getComputedStyle(r,null),me&&me.set(r,t)),t.getPropertyValue(e)}function dt(r){return Math.floor(r*1e3)}var se={TARGET_DURATION:"#EXT-X-TARGETDURATION",PART_INF:"#EXT-X-PART-INF",SERVER_CONTROL:"#EXT-X-SERVER-CONTROL",INF:"#EXTINF",PROGRAM_DATE_TIME:"#EXT-X-PROGRAM-DATE-TIME",VERSION:"#EXT-X-VERSION",SESSION_DATA:"#EXT-X-SESSION-DATA"},Ue=function(e){return this.buffer="",this.manifest={segments:[],serverControl:{},sessionData:{}},this.currentUri={},this.process(e),this.manifest};Ue.prototype.process=function(r){var e;for(this.buffer+=r,e=this.buffer.indexOf("\n");e>-1;e=this.buffer.indexOf("\n"))this.processLine(this.buffer.substring(0,e)),this.buffer=this.buffer.substring(e+1)};Ue.prototype.processLine=function(r){var e=r.indexOf(":"),t=Aa(r,e),a=t[0],i=t.length===2?ct(t[1]):void 0;if(a[0]!=="#")this.currentUri.uri=a,this.manifest.segments.push(this.currentUri),this.manifest.targetDuration&&!("duration"in this.currentUri)&&(this.currentUri.duration=this.manifest.targetDuration),this.currentUri={};else switch(a){case se.TARGET_DURATION:{if(!isFinite(i)||i<0)return;this.manifest.targetDuration=i,this.setHoldBack();break}case se.PART_INF:{lt(this.manifest,t),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),this.setHoldBack();break}case se.SERVER_CONTROL:{lt(this.manifest,t),this.setHoldBack();break}case se.INF:{i===0?this.currentUri.duration=.01:i>0&&(this.currentUri.duration=i);break}case se.PROGRAM_DATE_TIME:{var n=i,o=new Date(n);this.manifest.dateTimeString||(this.manifest.dateTimeString=n,this.manifest.dateTimeObject=o),this.currentUri.dateTimeString=n,this.currentUri.dateTimeObject=o;break}case se.VERSION:{lt(this.manifest,t);break}case se.SESSION_DATA:{var s=Oa(t[1]),f=Pe(s);Object.assign(this.manifest.sessionData,f)}}};Ue.prototype.setHoldBack=function(){var r=this.manifest,e=r.serverControl,t=r.targetDuration,a=r.partTargetDuration;if(e){var i="holdBack",n="partHoldBack",o=t&&t*3,s=a&&a*2;t&&!e.hasOwnProperty(i)&&(e[i]=o),o&&e[i]<o&&(e[i]=o),a&&!e.hasOwnProperty(n)&&(e[n]=a*3),a&&e[n]<s&&(e[n]=s)}};var lt=function(r,e){var t=Gr(e[0].replace("#EXT-X-","")),a;qa(e[1])?(a={},a=Object.assign(Ra(e[1]),a)):a=ct(e[1]),r[t]=a},Gr=function(r){return r.toLowerCase().replace(/-(\w)/g,function(e){return e[1].toUpperCase()})},ct=function(r){if(r.toLowerCase()==="yes"||r.toLowerCase()==="no")return r.toLowerCase()==="yes";var e=r.indexOf(":")!==-1?r:parseFloat(r);return isNaN(e)?r:e},Sa=function(r){var e={},t=r.split("=");if(t.length>1){var a=Gr(t[0]);e[a]=ct(t[1])}return e},Ra=function(r){for(var e=r.split(","),t={},a=0;e.length>a;a++){var i=e[a],n=Sa(i);t=Object.assign(n,t)}return t},qa=function(r){return r.indexOf("=")>-1},Aa=function(r,e){return e===-1?[r]:[r.substring(0,e),r.substring(e+1)]},Oa=function(r){var e={};if(r){var t=r.search(","),a=r.slice(0,t),i=r.slice(t+1),n=[a,i];return n.forEach(function(o,s){for(var f=o.replace(/['"]+/g,"").split("="),h=0;h<f.length;h++)f[h]==="DATA-ID"&&(e["DATA-ID"]=f[1-h]),f[h]==="VALUE"&&(e.VALUE=f[1-h])}),{data:e}}},Jr=Ue;var Ia={safeCall:st,safeIncrement:O,getComputedStyle:ut,secondsToMs:dt,assign:Object.assign,headersStringToObject:fe,cdnHeadersToRequestId:oe,extractHostnameAndDomain:ee,extractHostname:F,manifestParser:Jr,generateShortID:Ae,generateUUID:X,now:A.now},Qr=Ia;var La={PLAYER_READY:"playerready",VIEW_INIT:"viewinit",VIDEO_CHANGE:"videochange",PLAY:"play",PAUSE:"pause",PLAYING:"playing",TIME_UPDATE:"timeupdate",SEEKING:"seeking",SEEKED:"seeked",REBUFFER_START:"rebufferstart",REBUFFER_END:"rebufferend",ERROR:"error",ENDED:"ended",RENDITION_CHANGE:"renditionchange",ORIENTATION_CHANGE:"orientationchange",AD_REQUEST:"adrequest",AD_RESPONSE:"adresponse",AD_BREAK_START:"adbreakstart",AD_PLAY:"adplay",AD_PLAYING:"adplaying",AD_PAUSE:"adpause",AD_FIRST_QUARTILE:"adfirstquartile",AD_MID_POINT:"admidpoint",AD_THIRD_QUARTILE:"adthirdquartile",AD_ENDED:"adended",AD_BREAK_END:"adbreakend",AD_ERROR:"aderror",REQUEST_COMPLETED:"requestcompleted",REQUEST_FAILED:"requestfailed",REQUEST_CANCELLED:"requestcanceled"},zr=La;var Na="mux-embed",Pa="5.2.1",Ca="2.1",G={},ie=function(e){var t=arguments;typeof e=="string"?ie.hasOwnProperty(e)?ye.default.setTimeout(function(){t=Array.prototype.splice.call(t,1),ie[e].apply(null,t)},0):I.warn("`"+e+"` is an unknown task"):typeof e=="function"?ye.default.setTimeout(function(){e(ie)},0):I.warn("`"+e+"` is invalid.")},Ma={loaded:A.now(),NAME:Na,VERSION:Pa,API_VERSION:Ca,PLAYER_TRACKED:!1,monitor:function(e,t){return ot(ie,e,t)},destroyMonitor:function(e){var t=j(Ee(e),1),a=t[0];a&&a.mux&&typeof a.mux.destroy=="function"?a.mux.destroy():I.error("A video element monitor for `"+e+"` has not been initialized via `mux.monitor`.")},addHLSJS:function(e,t){var a=$(e);G[a]?G[a].addHLSJS(t):I.error("A monitor for `"+a+"` has not been initialized.")},addDashJS:function(e,t){var a=$(e);G[a]?G[a].addDashJS(t):I.error("A monitor for `"+a+"` has not been initialized.")},removeHLSJS:function(e){var t=$(e);G[t]?G[t].removeHLSJS():I.error("A monitor for `"+t+"` has not been initialized.")},removeDashJS:function(e){var t=$(e);G[t]?G[t].removeDashJS():I.error("A monitor for `"+t+"` has not been initialized.")},init:function(e,t){de()&&t&&t.respectDoNotTrack&&I.info("The browser's Do Not Track flag is enabled - Mux beaconing is disabled.");var a=$(e);G[a]=new yr(ie,a,t)},emit:function(e,t,a){var i=$(e);G[i]?(G[i].emit(t,a),t==="destroy"&&delete G[i]):I.error("A monitor for `"+i+"` has not been initialized.")},checkDoNotTrack:de,log:I,utils:Qr,events:zr,WINDOW_HIDDEN:!1,WINDOW_UNLOADING:!1};Object.assign(ie,Ma);typeof ye.default!="undefined"&&typeof ye.default.addEventListener=="function"&&ye.default.addEventListener("pagehide",function(r){r.persisted||(ie.WINDOW_UNLOADING=!0)},!1);var Ha=ie;
/*!
* JavaScript Cookie v2.1.3
* https://github.com/js-cookie/js-cookie
*
* Copyright 2006, 2015 Klaus Hartl & Fagner Brack
* Released under the MIT license
*/
